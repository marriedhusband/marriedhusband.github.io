/*! controltag - v5.69.0 - git 67b92ed - 2016-05-06 13:22:33 */
!function(){var a,b;a=function(b,c){a[b]=c},b=function(){return b=function(c){var d;if(null==a[c])throw new Error("Unknown require: "+c);return c in b||(b[c]=d={exports:{}},a[c].call(null,b,d.exports,d),b[c]=d.exports),b[c]}}(),a("hogan.js",function(a,b,c){var d={};!function(a){function b(a,b,c){var d;return b&&"object"==typeof b&&(void 0!==b[a]?d=b[a]:c&&b.get&&"function"==typeof b.get&&(d=b.get(a))),d}function c(a,b,c,d,e,f){function g(){}function h(){}g.prototype=a,h.prototype=a.subs;var i,j=new g;j.subs=new h,j.subsText={},j.buf="",d=d||{},j.stackSubs=d,j.subsText=f;for(i in b)d[i]||(d[i]=b[i]);for(i in d)j.subs[i]=d[i];e=e||{},j.stackPartials=e;for(i in c)e[i]||(e[i]=c[i]);for(i in e)j.partials[i]=e[i];return j}function d(a){return String(null===a||void 0===a?"":a)}function e(a){return a=d(a),k.test(a)?a.replace(f,"&amp;").replace(g,"&lt;").replace(h,"&gt;").replace(i,"&#39;").replace(j,"&quot;"):a}a.Template=function(a,b,c,d){a=a||{},this.r=a.code||this.r,this.c=c,this.options=d||{},this.text=b||"",this.partials=a.partials||{},this.subs=a.subs||{},this.buf=""},a.Template.prototype={r:function(a,b,c){return""},v:e,t:d,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},ep:function(a,b){var d=this.partials[a],e=b[d.name];if(d.instance&&d.base==e)return d.instance;if("string"==typeof e){if(!this.c)throw new Error("No compiler available.");e=this.c.compile(e,this.options)}if(!e)return null;if(this.partials[a].base=e,d.subs){b.stackText||(b.stackText={});for(key in d.subs)b.stackText[key]||(b.stackText[key]=void 0!==this.activeSub&&b.stackText[this.activeSub]?b.stackText[this.activeSub]:this.text);e=c(e,d.subs,d.partials,this.stackSubs,this.stackPartials,b.stackText)}return this.partials[a].instance=e,e},rp:function(a,b,c,d){var e=this.ep(a,c);return e?e.ri(b,c,d):""},rs:function(a,b,c){var d=a[a.length-1];if(!l(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return l(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ms(a,b,c,d,e,f,g)),h=!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,c,d,e){var f,g=a.split("."),h=this.f(g[0],c,d,e),i=this.options.modelGet,j=null;if("."===a&&l(c[c.length-2]))h=c[c.length-1];else for(var k=1;k<g.length;k++)f=b(g[k],h,i),void 0!==f?(j=h,h=f):h="";return e&&!h?!1:(e||"function"!=typeof h||(c.push(j),h=this.mv(h,c,d),c.pop()),h)},f:function(a,c,d,e){for(var f=!1,g=null,h=!1,i=this.options.modelGet,j=c.length-1;j>=0;j--)if(g=c[j],f=b(a,g,i),void 0!==f){h=!0;break}return h?(e||"function"!=typeof f||(f=this.mv(f,c,d)),f):e?!1:""},ls:function(a,b,c,e,f){var g=this.options.delimiters;return this.options.delimiters=f,this.b(this.ct(d(a.call(b,e)),b,c)),this.options.delimiters=g,!1},ct:function(a,b,c){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(a,this.options).render(b,c)},b:function(a){this.buf+=a},fl:function(){var a=this.buf;return this.buf="",a},ms:function(a,b,c,d,e,f,g){var h,i=b[b.length-1],j=a.call(i);return"function"==typeof j?d?!0:(h=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(j,i,c,h.substring(e,f),g)):j},mv:function(a,b,c){var e=b[b.length-1],f=a.call(e);return"function"==typeof f?this.ct(d(f.call(e)),e,c):f},sub:function(a,b,c,d){var e=this.subs[a];e&&(this.activeSub=a,e(b,c,this,d),this.activeSub=!1)}};var f=/&/g,g=/</g,h=/>/g,i=/\'/g,j=/\"/g,k=/[&<>\"\']/,l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof b?b:d),function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;e>d;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function e(b,c,d,h){var i=[],j=null,k=null,l=null;for(k=d[d.length-1];b.length>0;){if(l=b.shift(),k&&"<"==k.tag&&!(l.tag in v))throw new Error("Illegal content in < super tag.");if(a.tags[l.tag]<=a.tags.$||f(l,h))d.push(l),l.nodes=e(b,l.tag,d,h);else{if("/"==l.tag){if(0===d.length)throw new Error("Closing tag without opener: /"+l.n);if(j=d.pop(),l.n!=j.n&&!g(l.n,j.n,h))throw new Error("Nesting error: "+j.n+" vs. "+l.n);return j.end=l.i,i}"\n"==l.tag&&(l.last=0==b.length||"\n"==b[0].tag)}i.push(l)}if(d.length>0)throw new Error("missing closing tag: "+d.pop().n);return i}function f(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].o==a.n)return a.tag="#",!0}function g(a,b,c){for(var d=0,e=c.length;e>d;d++)if(c[d].c==a&&c[d].o==b)return!0}function h(a){var b=[];for(var c in a)b.push('"'+j(c)+'": function(c,p,t,i) {'+a[c]+"}");return"{ "+b.join(",")+" }"}function i(a){var b=[];for(var c in a.partials)b.push('"'+j(c)+'":{name:"'+j(a.partials[c].name)+'", '+i(a.partials[c])+"}");return"partials: {"+b.join(",")+"}, subs: "+h(a.subs)}function j(a){return a.replace(s,"\\\\").replace(p,'\\"').replace(q,"\\n").replace(r,"\\r").replace(t,"\\u2028").replace(u,"\\u2029")}function k(a){return~a.indexOf(".")?"d":"f"}function l(a,b){var c="<"+(b.prefix||""),d=c+a.n+w++;return b.partials[d]={name:a.n,partials:{}},b.code+='t.b(t.rp("'+j(d)+'",c,p,"'+(a.indent||"")+'"));',d}function m(a,b){b.code+="t.b(t.t(t."+k(a.n)+'("'+j(a.n)+'",c,p,0)));'}function n(a){return"t.b("+a+");"}var o=/\S/,p=/\"/g,q=/\n/g,r=/\r/g,s=/\\/g,t=/\u2028/,u=/\u2029/;a.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},a.scan=function(e,f){function g(){s.length>0&&(t.push({tag:"_t",text:new String(s)}),s="")}function h(){for(var b=!0,c=w;c<t.length;c++)if(b=a.tags[t[c].tag]<a.tags._v||"_t"==t[c].tag&&null===t[c].text.match(o),!b)return!1;return b}function i(a,b){if(g(),a&&h())for(var c,d=w;d<t.length;d++)t[d].text&&((c=t[d+1])&&">"==c.tag&&(c.indent=t[d].text.toString()),t.splice(d,1));else b||t.push({tag:"\n"});u=!1,w=t.length}function j(a,b){var d="="+y,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");return x=f[0],y=f[f.length-1],e+d.length-1}var k=e.length,l=0,m=1,n=2,p=l,q=null,r=null,s="",t=[],u=!1,v=0,w=0,x="{{",y="}}";for(f&&(f=f.split(" "),x=f[0],y=f[1]),v=0;k>v;v++)p==l?d(x,e,v)?(--v,g(),p=m):"\n"==e.charAt(v)?i(u):s+=e.charAt(v):p==m?(v+=x.length-1,r=a.tags[e.charAt(v+1)],q=r?e.charAt(v+1):"_v","="==q?(v=j(e,v),p=l):(r&&v++,p=n),u=v):d(y,e,v)?(t.push({tag:q,n:c(s),otag:x,ctag:y,i:"/"==q?u-x.length:v+y.length}),s="",v+=y.length-1,p=l,"{"==q&&("}}"==y?v++:b(t[t.length-1]))):s+=e.charAt(v);return i(u,!0),t};var v={_t:!0,"\n":!0,$:!0,"/":!0};a.stringify=function(b,c,d){return"{code: function (c,p,i) { "+a.wrapMain(b.code)+" },"+i(b)+"}"};var w=0;a.generate=function(b,c,d){w=0;var e={code:"",subs:{},partials:{}};return a.walk(b,e),d.asString?this.stringify(e,c,d):this.makeTemplate(e,c,d)},a.wrapMain=function(a){return'var t=this;t.b(i=i||"");'+a+"return t.fl();"},a.template=a.Template,a.makeTemplate=function(a,b,c){var d=this.makePartials(a);return d.code=new Function("c","p","i",this.wrapMain(a.code)),new this.template(d,b,this,c)},a.makePartials=function(a){var b,c={subs:{},partials:a.partials,name:a.name};for(b in c.partials)c.partials[b]=this.makePartials(c.partials[b]);for(b in a.subs)c.subs[b]=new Function("c","p","t","i",a.subs[b]);return c},a.codegen={"#":function(b,c){c.code+="if(t.s(t."+k(b.n)+'("'+j(b.n)+'",c,p,1),c,p,0,'+b.i+","+b.end+',"'+b.otag+" "+b.ctag+'")){t.rs(c,p,function(c,p,t){',a.walk(b.nodes,c),c.code+="});c.pop();}"},"^":function(b,c){c.code+="if(!t.s(t."+k(b.n)+'("'+j(b.n)+'",c,p,1),c,p,1,0,0,"")){',a.walk(b.nodes,c),c.code+="};"},">":l,"<":function(b,c){var d={partials:{},code:"",subs:{},inPartial:!0};a.walk(b.nodes,d);var e=c.partials[l(b,c)];e.subs=d.subs,e.partials=d.partials},$:function(b,c){var d={subs:{},code:"",partials:c.partials,prefix:b.n};a.walk(b.nodes,d),c.subs[b.n]=d.code,c.inPartial||(c.code+='t.sub("'+j(b.n)+'",c,p,i);')},"\n":function(a,b){b.code+=n('"\\n"'+(a.last?"":" + i"))},_v:function(a,b){b.code+="t.b(t.v(t."+k(a.n)+'("'+j(a.n)+'",c,p,0)));'},_t:function(a,b){b.code+=n('"'+j(a.text)+'"')},"{":m,"&":m},a.walk=function(b,c){for(var d,e=0,f=b.length;f>e;e++)d=a.codegen[b[e].tag],d&&d(b[e],c);return c},a.parse=function(a,b,c){return c=c||{},e(a,"",[],c.sectionTags||[])},a.cache={},a.cacheKey=function(a,b){return[a,!!b.asString,!!b.disableLambda,b.delimiters,!!b.modelGet].join("||")},a.compile=function(b,c){c=c||{};var d=a.cacheKey(b,c),e=this.cache[d];if(e){var f=e.partials;for(var g in f)delete f[g].instance;return e}return e=this.generate(this.parse(this.scan(b,c.delimiters),b,c),b,c),this.cache[d]=e}}("undefined"!=typeof b?b:d),"undefined"!=typeof c&&c.exports&&(c.exports=d)}),a("postscribe",function(b,c,d){!function(b,e){"object"==typeof c&&"object"==typeof d?d.exports=e():"function"==typeof a&&a.amd?a([],e):"object"==typeof c?c.postscribe=e():b.postscribe=e()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=c(1),f=d(e);a.exports=f["default"]},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){}function g(){var a=q.shift();if(a){var b=n.last(a);b.afterDequeue(),a.stream=h.apply(void 0,a),b.afterStreamStart()}}function h(a,b,c){function d(a){a=c.beforeWrite(a),r.write(a),c.afterWrite(a)}r=new l["default"](a,c),r.id=p++,r.name=c.name||r.id,i.streams[r.name]=r;var e=a.ownerDocument,h={close:e.close,open:e.open,write:e.write,writeln:e.writeln};j(e,{close:f,open:f,write:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return d(b.join(""))},writeln:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return d(b.join("")+"\n")}});var k=r.win.onerror||f;return r.win.onerror=function(a,b,d){c.error({msg:a+" - "+b+": "+d}),k.apply(r.win,[a,b,d])},r.write(b,function(){j(e,h),r.win.onerror=k,c.done(),r=null,g()}),r}function i(a,b,c){if(n.isFunction(c))c={done:c};else if("clear"===c)return q=[],r=null,void(p=0);c=n.defaults(c,o),a=/^#/.test(a)?window.document.getElementById(a.substr(1)):a.jquery?a[0]:a;var d=[a,b,c];return a.postscribe={cancel:function(){d.stream?d.stream.abort():d[1]=f}},c.beforeEnqueue(d),q.push(d),r||g(),a.postscribe}b.__esModule=!0;var j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b["default"]=i;var k=c(2),l=e(k),m=c(4),n=d(m),o={afterAsync:f,afterDequeue:f,afterStreamStart:f,afterWrite:f,autoFix:!0,beforeEnqueue:f,beforeWriteToken:function(a){return a},beforeWrite:function(a){return a},done:f,error:function(a){throw a},releaseAsync:!1},p=0,q=[],r=null;j(i,{streams:{},queue:q,WriteStream:l["default"]})},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){var c=o+b,d=a.getAttribute(c);return m.existy(d)?String(d):d}function h(a,b){var c=arguments.length<=2||void 0===arguments[2]?null:arguments[2],d=o+b;m.existy(c)&&""!==c?a.setAttribute(d,c):a.removeAttribute(d)}b.__esModule=!0;var i=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},j=c(3),k=e(j),l=c(4),m=d(l),n=!1,o="data-ps-",p="ps-style",q="ps-script",r=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,a),this.root=b,this.options=c,this.doc=b.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new k["default"]("",{autoFix:c.autoFix}),this.actuals=[b],this.proxyHistory="",this.proxyRoot=this.doc.createElement(b.nodeName),this.scriptStack=[],this.writeQueue=[],h(this.proxyRoot,"proxyof",0)}return a.prototype.write=function(){var a;for((a=this.writeQueue).push.apply(a,arguments);!this.deferredRemote&&this.writeQueue.length;){var b=this.writeQueue.shift();m.isFunction(b)?this._callFunction(b):this._writeImpl(b)}},a.prototype._callFunction=function(a){var b={type:"function",value:a.name||a.toString()};this._onScriptStart(b),a.call(this.win,this.doc),this._onScriptDone(b)},a.prototype._writeImpl=function(a){this.parser.append(a);for(var b=void 0,c=void 0,d=void 0,e=[];(b=this.parser.readToken())&&!(c=m.isScript(b))&&!(d=m.isStyle(b));)b=this.options.beforeWriteToken(b),b&&e.push(b);e.length>0&&this._writeStaticTokens(e),c&&this._handleScriptToken(b),d&&this._handleStyleToken(b)},a.prototype._writeStaticTokens=function(a){var b=this._buildChunk(a);return b.actual?(b.html=this.proxyHistory+b.actual,this.proxyHistory+=b.proxy,this.proxyRoot.innerHTML=b.html,n&&(b.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),n&&(b.actualInnerHTML=this.root.innerHTML),b):null},a.prototype._buildChunk=function(a){for(var b=this.actuals.length,c=[],d=[],e=[],f=a.length,g=0;f>g;g++){var h=a[g],i=h.toString();if(c.push(i),h.attrs){if(!/^noscript$/i.test(h.tagName)){var j=b++;d.push(i.replace(/(\/?>)/," "+o+"id="+j+" $1")),h.attrs.id!==q&&h.attrs.id!==p&&e.push("atomicTag"===h.type?"":"<"+h.tagName+" "+o+"proxyof="+j+(h.unary?" />":">"))}}else d.push(i),e.push("endTag"===h.type?i:"")}return{tokens:a,raw:c.join(""),actual:d.join(""),proxy:e.join("")}},a.prototype._walkChunk=function(){for(var a=void 0,b=[this.proxyRoot];m.existy(a=b.shift());){var c=1===a.nodeType,d=c&&g(a,"proxyof");if(!d){c&&(this.actuals[g(a,"id")]=a,h(a,"id"));var e=a.parentNode&&g(a.parentNode,"proxyof");e&&this.actuals[e].appendChild(a)}b.unshift.apply(b,m.toArray(a.childNodes))}},a.prototype._handleScriptToken=function(a){var b=this,c=this.parser.clear();c&&this.writeQueue.unshift(c),a.src=a.attrs.src||a.attrs.SRC,a=this.options.beforeWriteToken(a),a&&(a.src&&this.scriptStack.length?this.deferredRemote=a:this._onScriptStart(a),this._writeScriptToken(a,function(){b._onScriptDone(a)}))},a.prototype._handleStyleToken=function(a){var b=this.parser.clear();b&&this.writeQueue.unshift(b),a.type=a.attrs.type||a.attrs.TYPE||"text/css",a=this.options.beforeWriteToken(a),a&&this._writeStyleToken(a),b&&this.write()},a.prototype._writeStyleToken=function(a){var b=this._buildStyle(a);this._insertCursor(b,p),a.content&&(b.styleSheet&&!b.sheet?b.styleSheet.cssText=a.content:b.appendChild(this.doc.createTextNode(a.content)))},a.prototype._buildStyle=function(a){var b=this.doc.createElement(a.tagName);return b.setAttribute("type",a.type),m.eachKey(a.attrs,function(a,c){b.setAttribute(a,c)}),b},a.prototype._insertCursor=function(a,b){this._writeImpl('<span id="'+b+'"/>');var c=this.doc.getElementById(b);c&&c.parentNode.replaceChild(a,c)},a.prototype._onScriptStart=function(a){a.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(a)},a.prototype._onScriptDone=function(a){return a!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,a.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)))},a.prototype._writeScriptToken=function(a,b){var c=this._buildScript(a),d=this._shouldRelease(c),e=this.options.afterAsync;a.src&&(c.src=a.src,this._scriptLoadHandler(c,d?e:function(){b(),e()}));try{this._insertCursor(c,q),c.src&&!d||b()}catch(f){this.options.error(f),b()}},a.prototype._buildScript=function(a){var b=this.doc.createElement(a.tagName);return m.eachKey(a.attrs,function(a,c){b.setAttribute(a,c)}),a.content&&(b.text=a.content),b},a.prototype._scriptLoadHandler=function(a,b){function c(){a=a.onload=a.onreadystatechange=a.onerror=null}function d(){c(),b()}function e(a){c(),f(a),b()}var f=this.options.error;i(a,{onload:function(){return d()},onreadystatechange:function(){/^(loaded|complete)$/.test(a.readyState)&&d()},onerror:function(){return e({message:"remote script failed "+a.src})}})},a.prototype._shouldRelease=function(a){var b=/^script$/i.test(a.nodeName);return!b||!!(this.options.releaseAsync&&a.src&&a.hasAttribute("async"))},a}();b["default"]=r},function(a,b,c){!function(b,c){a.exports=c()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=c(1),f=d(e);a.exports=f["default"]},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0;var g=c(2),h=e(g),i=c(3),j=e(i),k=c(6),l=d(k),m=c(5),n={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},o=function(){function a(){var b=this,c=arguments.length<=0||void 0===arguments[0]?"":arguments[0],d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];f(this,a),this.stream=c;var e=!1,g={};for(var i in h)h.hasOwnProperty(i)&&(d.autoFix&&(g[i+"Fix"]=!0),e=e||g[i+"Fix"]);e?(this._readToken=(0,l["default"])(this,g,function(){return b._readTokenImpl()}),this._peekToken=(0,l["default"])(this,g,function(){return b._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return a.prototype.append=function(a){this.stream+=a},a.prototype.prepend=function(a){this.stream=a+this.stream},a.prototype._readTokenImpl=function(){var a=this._peekTokenImpl();return a?(this.stream=this.stream.slice(a.length),a):void 0},a.prototype._peekTokenImpl=function(){for(var a in n)if(n.hasOwnProperty(a)&&n[a].test(this.stream)){var b=j[a](this.stream);if(b)return"startTag"===b.type&&/script|style/i.test(b.tagName)?null:(b.text=this.stream.substr(0,b.length),b)}},a.prototype.peekToken=function(){return this._peekToken()},a.prototype.readToken=function(){return this._readToken()},a.prototype.readTokens=function(a){for(var b=void 0;b=this.readToken();)if(a[b.type]&&a[b.type](b)===!1)return},a.prototype.clear=function(){var a=this.stream;return this.stream="",a},a.prototype.rest=function(){return this.stream},a}();b["default"]=o,o.tokenToString=function(a){return a.toString()},o.escapeAttributes=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=(0,m.escapeQuotes)(a[c],null));return b},o.supports=h;for(var p in h)h.hasOwnProperty(p)&&(o.browserHasFlaw=o.browserHasFlaw||!h[p]&&p)},function(a,b){"use strict";b.__esModule=!0;var c=!1,d=!1,e=window.document.createElement("div");try{var f="<P><I></P></I>";e.innerHTML=f,b.tagSoup=c=e.innerHTML!==f}catch(g){b.tagSoup=c=!1}try{e.innerHTML="<P><i><P></P></i></P>",b.selfClose=d=2===e.childNodes.length}catch(g){b.selfClose=d=!1}e=null,b.tagSoup=c,b.selfClose=d},function(a,b,c){"use strict";function d(a){var b=a.indexOf("-->");return b>=0?new j.CommentToken(a.substr(4,b-1),b+3):void 0}function e(a){var b=a.indexOf("<");return new j.CharsToken(b>=0?b:a.length)}function f(a){var b=a.indexOf(">");if(-1!==b){var c=a.match(k.startTag);if(c){var d=function(){var a={},b={},d=c[2];return c[2].replace(k.attr,function(c,e){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(a[arguments[5]]="",b[arguments[5]]=!0):a[e]=arguments[2]||arguments[3]||arguments[4]||k.fillAttr.test(e)&&e||"":a[e]="",d=d.replace(c,"")}),{v:new j.StartTagToken(c[1],c[0].length,a,b,!!c[3],d.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}();if("object"===("undefined"==typeof d?"undefined":i(d)))return d.v}}}function g(a){var b=f(a);if(b){var c=a.slice(b.length);if(c.match(new RegExp("</\\s*"+b.tagName+"\\s*>","i"))){var d=c.match(new RegExp("([\\s\\S]*?)</\\s*"+b.tagName+"\\s*>","i"));if(d)return new j.AtomicTagToken(b.tagName,d[0].length+b.length,b.attrs,b.booleanAttrs,d[1])}}}function h(a){var b=a.match(k.endTag);return b?new j.EndTagToken(b[1],b[0].length):void 0}b.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};b.comment=d,b.chars=e,b.startTag=f,b.atomicTag=g,b.endTag=h;var j=c(4),k={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0,b.EndTagToken=b.AtomicTagToken=b.StartTagToken=b.TagToken=b.CharsToken=b.CommentToken=b.Token=void 0;var e=c(5),f=(b.Token=function g(a,b){d(this,g),this.type=a,this.length=b,this.text=""},b.CommentToken=function(){function a(b,c){d(this,a),this.type="comment",this.length=c||(b?b.length:0),this.text="",this.content=b}return a.prototype.toString=function(){return"<!--"+this.content},a}(),b.CharsToken=function(){function a(b){d(this,a),this.type="chars",this.length=b,this.text=""}return a.prototype.toString=function(){return this.text},a}(),b.TagToken=function(){function a(b,c,e,f,g){d(this,a),this.type=b,this.length=e,this.text="",this.tagName=c,this.attrs=f,this.booleanAttrs=g,this.unary=!1,this.html5Unary=!1}return a.formatTag=function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1],c="<"+a.tagName;for(var d in a.attrs)if(a.attrs.hasOwnProperty(d)){c+=" "+d;var f=a.attrs[d];"undefined"!=typeof a.booleanAttrs&&"undefined"!=typeof a.booleanAttrs[d]||(c+='="'+(0,e.escapeQuotes)(f)+'"')}return a.rest&&(c+=" "+a.rest),c+=a.unary&&!a.html5Unary?"/>":">",void 0!==b&&null!==b&&(c+=b+"</"+a.tagName+">"),c},a}());b.StartTagToken=function(){function a(b,c,e,f,g,h){d(this,a),this.type="startTag",this.length=c,this.text="",this.tagName=b,this.attrs=e,this.booleanAttrs=f,this.html5Unary=!1,this.unary=g,this.rest=h}return a.prototype.toString=function(){return f.formatTag(this)},a}(),b.AtomicTagToken=function(){function a(b,c,e,f,g){d(this,a),this.type="atomicTag",this.length=c,this.text="",this.tagName=b,this.attrs=e,this.booleanAttrs=f,this.unary=!1,this.html5Unary=!1,this.content=g}return a.prototype.toString=function(){return f.formatTag(this,this.content)},a}(),b.EndTagToken=function(){function a(b,c){d(this,a),this.type="endTag",this.length=c,this.text="",this.tagName=b}return a.prototype.toString=function(){return"</"+this.tagName+">"},a}()},function(a,b){"use strict";function c(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return a?a.replace(/([^"]*)"/g,function(a,b){return/\\/.test(b)?b+'"':b+'\\"'}):b}b.__esModule=!0,b.escapeQuotes=c},function(a,b){"use strict";function c(a){return a&&"startTag"===a.type&&(a.unary=h.test(a.tagName)||a.unary,a.html5Unary=!/\/>$/.test(a.text)),a}function d(a,b){var d=a.stream,e=c(b());return a.stream=d,e}function e(a,b){var c=b.pop();a.prepend("</"+c.tagName+">")}function f(){var a=[];return a.last=function(){return this[this.length-1]},a.lastTagNameEq=function(a){var b=this.last();return b&&b.tagName&&b.tagName.toUpperCase()===a.toUpperCase()},a.containsTagName=function(a){for(var b,c=0;b=this[c];c++)if(b.tagName===a)return!0;return!1},a}function g(a,b,g){function h(){var b=d(a,g);b&&k[b.type]&&k[b.type](b)}var j=f(),k={startTag:function(c){var d=c.tagName;"TR"===d.toUpperCase()&&j.lastTagNameEq("TABLE")?(a.prepend("<TBODY>"),h()):b.selfCloseFix&&i.test(d)&&j.containsTagName(d)?j.lastTagNameEq(d)?e(a,j):(a.prepend("</"+c.tagName+">"),h()):c.unary||j.push(c)},endTag:function(c){var d=j.last();d?b.tagSoupFix&&!j.lastTagNameEq(c.tagName)?e(a,j):j.pop():b.tagSoupFix&&(g(),h())}};return function(){return h(),c(g())}}b.__esModule=!0,b["default"]=g;var h=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,i=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])})},function(a,b){"use strict";function c(a){return void 0!==a&&null!==a}function d(a){return"function"==typeof a}function e(a,b,c){var d=void 0,e=a&&a.length||0;for(d=0;e>d;d++)b.call(c,a[d],d)}function f(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,d,a[d])}function g(a,b){return a=a||{},f(b,function(b,d){c(a[b])||(a[b]=d)}),a}function h(a){try{return Array.prototype.slice.call(a)}catch(b){var c=function(){var b=[];return e(a,function(a){b.push(a)}),{v:b}}();if("object"===("undefined"==typeof c?"undefined":m(c)))return c.v}}function i(a){return a[a.length-1]}function j(a,b){return a&&("startTag"===a.type||"atomicTag"===a.type)&&"tagName"in a?!!~a.tagName.toLowerCase().indexOf(b):!1}function k(a){return j(a,"script")}function l(a){return j(a,"style")}b.__esModule=!0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};b.existy=c,b.isFunction=d,b.each=e,b.eachKey=f,b.defaults=g,b.toArray=h,b.last=i,b.isTag=j,b.isScript=k,b.isStyle=l}])})}),a("underscore",function(a,b,c){var d,e=function(a){return a instanceof e?a:this instanceof e?void(this._wrapped=a):new e(a)},f={},g=Array.prototype,h=Object.prototype,i=g.slice,j=h.toString,k=h.hasOwnProperty,l=g.map,m=g.filter,n=g.every,o=g.some,p=g.indexOf,q=Array.isArray,r=e.each=e.forEach=function(a,b,c){if(null!=a)if(d&&a.forEach===d)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,g=a.length;g>e;e++)if(e in a&&b.call(c,a[e],e,a)===f)return}else for(var h in a)if(k.call(a,h)&&b.call(c,h,a[h],a)===f)return};e.map=function(a,b,c){var d=[];return null==a?d:l&&a.map===l?a.map(b,c):(r(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},e.find=function(a,b,c){var d;return s(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},e.every=e.all=function(a,b,c){var d=!0;return null==a?d:n&&a.every===n?a.every(b,c):(r(a,function(a,e,g){return(d=d&&b.call(c,a,e,g))?void 0:f}),d)};var s=e.some=e.any=function(a,b,c){b=b||e.identity;var d=!1;return null==a?d:o&&a.some===o?a.some(b,c):(r(a,function(a,e,g){return d||(d=b.call(c,a,e,g))?f:void 0}),!!d)};e.include=e.contains=function(a,b){var c=!1;return null==a?c:p&&a.indexOf===p?-1!=a.indexOf(b):c=s(a,function(a){return a===b})},e.filter=function(a,b,c){var d=[];return null==a?d:m&&a.filter===m?a.filter(b,c):(r(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},e.reduce=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),r(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},e.indexOf=function(a,b){if(null==a)return-1;var c,d;if(p&&a.indexOf===p)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(c in a&&a[c]===b)return c;return-1},e.uniq=e.unique=function(a,b,c){var d=c?e.map(a,c):a,f=[];return a.length<3&&(b=!0),e.reduce(d,function(c,d,g){return(b?e.last(c)===d&&c.length:e.include(c,d))||(c.push(d),f.push(a[g])),c},[]),f},e.difference=function(a){var b=e.flatten(i.call(arguments,1),!0);return e.filter(a,function(a){return!e.include(b,a)})},e.flatten=function(a,b){return e.reduce(a,function(a,c){return e.isArray(c)?a.concat(b?c:e.flatten(c)):(a[a.length]=c,a)},[])},e.union=function(){return e.uniq(e.flatten(arguments,!0,!0))},e.intersection=e.intersect=function(a){var b=i.call(arguments,1);return e.filter(e.uniq(a),function(a){return e.every(b,function(b){return e.indexOf(b,a)>=0})})},e.groupBy=function(a,b){var c={},d=e.isFunction(b)?b:function(a){return a[b]};return r(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},e.compact=function(a){return e.filter(a,function(a){return!!a})},e.pluck=function(a,b){return e.map(a,function(a){return a[b]})},e.identity=function(a){return a},e.values=function(a){return e.map(a,e.identity)},e.times=function(a,b,c){for(var d=0;a>d;d++)b.call(c,d)},e.clone=function(a){return e.isObject(a)?e.isArray(a)?a.slice():e.extend({},a):a},e.extend=function(a){return r(i.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},e.defaults=function(a){return r(i.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},e.first=e.head=function(a,b,c){return null==b||c?a[0]:i.call(a,0,b)},e.initial=function(a,b,c){return i.call(a,0,a.length-(null==b||c?1:b))},e.last=function(a,b,c){return null==b||c?a[a.length-1]:i.call(a,Math.max(a.length-b,0))},e.rest=e.tail=function(a,b,c){return i.call(a,null==b||c?1:b)},e.has=function(a,b){return null!=a&&k.call(a,b)},e.keys=function(a){if(!e.isObject(a))return[];var b=[];for(var c in a)e.has(a,c)&&b.push(c);return b},e.size=function(a){return null==a?0:a.length===+a.length?a.length:e.keys(a).length},e.toArray=function(a){return a?a.toArray?a.toArray():e.isArray(a)?i.call(a):e.isArguments(a)?i.call(a):e.values(a):[]},e.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},e.template=function(a,b){var c=e.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj","_",d);return b?f(b,e):function(a){return f.call(this,a,e)}},e.isEmpty=function(a){if(e.isArray(a)||e.isString(a))return 0===a.length;for(var b in a)if(k.call(a,b))return!1;return!0},e.isElement=function(a){return!(!a||1!==a.nodeType)},e.isArray=q||function(a){return"[object Array]"==j.call(a)},e.isObject=function(a){return a===Object(a)},"[object Arguments]"==j.call(arguments)?e.isArguments=function(a){return"[object Arguments]"==j.call(a)}:e.isArguments=function(a){return!(!a||!k.call(a,"callee"))},e.isFunction=function(a){return"[object Function]"==j.call(a)},e.isString=function(a){return"[object String]"==j.call(a)},e.isNumber=function(a){return"[object Number]"==j.call(a)},e.isNaN=function(a){return a!==a},e.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},e.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},e.now=function(){return(new Date).getTime()},e.throttle=function(a,b,c){var d,f,g,h=null,i=0;c||(c={});var j=function(){i=c.leading===!1?0:e.now(),h=null,g=a.apply(d,f),d=f=null};return function(){var k=e.now();i||c.leading!==!1||(i=k);var l=b-(k-i);return d=this,f=arguments,0>=l?(clearTimeout(h),h=null,i=k,g=a.apply(d,f),d=f=null):h||c.trailing===!1||(h=setTimeout(j,l)),g}},e.partial=function(a){var b=i.call(arguments,1);return function(){for(var c=0,d=b.slice(),f=0,g=d.length;g>f;f++)d[f]===e&&(d[f]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},e.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},
c.exports=e}),a("adm-events",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;i=a("underscore"),w=a("util"),r=a("routes"),s=a("store"),k=a("data"),v=a("timing"),d=b.COOKIE_SERVICE_TTL=20*v.MINUTES,e="$event_",f=b.EVENT_TTL=2*v.DAYS,g=8,h=100,n=b.prefix="e_",l=b.knownEventIds=[],j=b.addEventId=function(a){i.contains(l,a)||l.push(a)},m=b.parse=function(a){var b;return b=a.split("&"),{id:b.shift(),attrs:w.parseKeyValues(b.join("&"))}},b.parseConfig=function(a){var b,c,d,f,k,l,m,n;for(null==a&&(a=[]),f=h,n=function(a){var b,c,d,h,k,l;switch(!1){case!(null==a||0===f--):break;case!i.isString(a):if(d=a.indexOf(e),-1!==d)return j(a.substr(d+e.length,g));break;default:for(k=a.slice(1),l=[],c=0,h=k.length;h>c;c++)b=k[c],l.push(n(b));return l}},l=[],b=0,d=a.length;d>b;b++)k=a[b],c=k.id,m=k.test,l.push(n(m));return l},u=b.stringify=function(a){return a.id+"&"+w.paramString(a.attrs)},t=b.storeEvent=function(a,b){b=b||0,s.set(n+u(a),1,f-b)},p=b.processEvent=function(a){var b,c,d,e,f,g;b="event_"+a.id,k.set(b,!0),e=a.attrs;for(d in e)f=e[d],c=b+"_attr_"+d,g=k.get(c)||k.set(c,[]),i.contains(g,f)||g.push(f)},q=b.readFromStore=function(){var a,b;b=s.namespace(n);for(a in b)p(m(a))},o=b.process3rdParty=function(a){var b,c,d,e,f;d=/^e_(.*)/;for(f in a)e=f.match(d),e&&(c=m(e[1].replace(/\^/g,"&").replace(/\|/g,"=")),i.contains(l,c.id)&&(b=(new Date-new Date(parseInt(a[f],10)))/1e3,t(c,b),p(c)))},b.check3rdParty=function(){return l.length&&!s.get("event3p")?a("http").jsonp({url:k.get("url_cookies")||"//beacon.krxd.net/cookie2json",callback:"kxjsonp_3pevents",done:function(a){return s.set("event3p","1",d),o(a)}}):void 0},q(),r.simple("admEvent",function(b,c){var d;d={id:b,attrs:c},t(d),p(d),a("http").pixel({url:k.get("url_event"),data:i.extend({event_id:b,pub_id:k.get("pubid")},c)})})});var c=[].slice;a("cache",function(a,b,d){var e,f,g,h,i,j,k,l,m,n,o;m=a("routes").simple,l=a("sha1"),n=a("store"),f=a("underscore"),o=a("timing"),j=a("json"),b.PREFIX=e="cache_",b.flush=h=function(){n.clear(function(a,b){return 0===b.indexOf(e)})},b.encode=b.encodeKey=g=function(){var a,b;return b=1<=arguments.length?c.call(arguments,0):[],a=l.hash(""+j.stringify(b)),""+e+a},b.get=i=function(a,b){var c;return c=n.get(a,b),""!==c?c:void 0},b.put=k=function(a,b,c){null==c&&(c=o.DAY),null!=a&&null!=b&&n.set(a,b,c)},b.remove=function(a){null!=a&&n.remove(a)},b.create=function(a,b){var d,e,h,j,l;return null==b&&(b={}),h=f.defaults(b,{id:a,parse:f.identity,serialize:f.identity,ttl:o.DAY}),d=h.id,e=h.parse,j=h.serialize,l=h.ttl,function(){var b,f,h;return b=1<=arguments.length?c.call(arguments,0):[],f=g(String(d),b),h=i(f),null!=h?e(h):(h=a.apply(null,b),k(f,j(h),l),h)}},m("cache",b.create)});var d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty,c=[].slice;a("config",function(a,b,f){var g,h,i,j,k,l,m;i=a("underscore"),m=a("util"),k=a("json"),l=a("store"),h=a("stateful").Stateful,g=function(a){function b(){this._pointerPair=d(this._pointerPair,this),this._makeWatchers=d(this._makeWatchers,this),this.toString=d(this.toString,this),this.toJSON=d(this.toJSON,this),this.destroy=d(this.destroy,this),this.persist=d(this.persist,this),this.has=d(this.has,this),this.remove=d(this.remove,this),this.set=d(this.set,this),this.get=d(this.get,this),b.__super__.constructor.apply(this,arguments),this._handles=[],this._persisted=[],this._defaults={confid:"no-confid"}}return e(b,a),b.prototype.get=function(a,b){var c,d;if(c=this._pointerPair(a),d=i.isString(c[1])?m.deref(c[0],c[1]):c[0],i.isString(d)){if(/^\d{1,12}$/.test(d))return Number(d);if(/^(true|false)$/.test(d))return"true"===d}return null!=d?d:b},b.prototype.set=function(a,b){var c,d;return d=this._pointerPair(a),i.isString(d[1])?(c=m.deref(d[0],d[1]),d[0][d[1]]=b,this._fire("set",a,c,b)):h.prototype.set.apply(this,arguments),this},b.prototype.remove=function(a){var b,c;return c=this._pointerPair(a),i.isString(c[1])?(b=m.deref(c[0],c[1]),delete c[0][c[1]],this._fire("remove",a,b,void 0)):h.prototype.remove.apply(this,arguments),this},b.prototype.has=function(a){return b.__super__.has.call(this,a)||null!=this.get(a)},b.prototype.persist=function(){var a,b,d,e,f,g;return b=1<=arguments.length?c.call(arguments,0):[],b=i.difference(b,this._persisted),d=function(a){return function(b){a.has(b,!0)&&l.set(b,a.get(b))}}(this),b=function(){var c,f,g;for(g=[],c=0,f=b.length;f>c;c++)a=b[c],e=i.partial(d,a),e(),g.push(this._makeWatchers(a,e));return g}.call(this),(f=this._handles).push.apply(f,b),(g=this._persisted).push.apply(g,b),this},b.prototype.destroy=function(){var a,b,c,d;for(d=this._handles,b=0,c=d.length;c>b;b++)(a=d[b])();return this},b.prototype.toJSON=function(){return i.extend({},this._defaults,this._raw)},b.prototype.toString=function(){return"Config"+k.stringify(this._raw)},b.prototype._has=function(){return h.prototype.has.apply(this,arguments)},b.prototype._makeWatchers=function(a,b){return i.compose(this.watch("set:"+a,b),this.watch("remove:"+a,function(){l.remove(a)}))},b.prototype._pointerPair=function(a){var b,c,d,e,f,g;return b=!1,f=a,e=void 0,a.indexOf(".")>0&&!this._has(a)&&(e=a.split("."),f=e[0],b=!0),g=h.prototype.get.call(this,f),b&&(d=e.slice(1,e.length-1).join("."),d&&(g=m.deref(g,d)),c=e.pop()),[g,c]},b}(h),j=void 0,b.Config=g,b.init=function(a){return!a&&j||(j=new g(a)),j},b.get=function(a,c){return b.init().get(a,c)},b.set=function(a,c){return b.init().set(a,c)},b.remove=function(a){return b.init().remove(a)},b.has=function(a){return b.init().has(a)}}),a("context-terms",function(a,b,c){var d,e,f,g,h,i,j,k;d=a("underscore"),k=a("util"),f=a("data"),g=["a","form","script","noscript","style","select","textarea","button","nav","header","footer"],e=new RegExp("<("+g.join("|")+")\\b","i"),h=new RegExp("^("+g.join("|")+")$","i"),b.process=function(a){var b,c,g,i,j,l,m,n;for(j=[window.document.body],n="";i=j.shift();)3===i.nodeType?n+=i.nodeValue:1===i.nodeType&&(h.test(i.nodeName)||(e.test(i.innerHTML)?j.unshift.apply(j,d.toArray(i.childNodes)):n+=i.innerText||i.textContent));for(n=n.replace(/\s\s+/g," "),b=0,c=a.length;c>b;b++)m=a[b],m.matches=0,l=new RegExp("\\b"+k.escapeRegexp(m.value)+"\\b","ig"),n.replace(l,function(){m.matches++});return g=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)m=a[b],f.set("context_term_"+m.id,m.matches)&&d.push(m);return d}(),f.set("context_terms_processed",!0),f.set("page_attr_kx_context_terms",g),f.set("context_terms",function(){var a,b,c;for(c=[],a=0,b=g.length;b>a;a++)m=g[a],c.push(m.id);return c}()),{text:n,terms:g}},i=a("pixel"),j=b.pixelFormatter=function(a){var b;return function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(""+b.id+i.tuppleSeparator+b.matches);return e}().join(",")},i.addFormatter("_kpa_kx_context_terms",j)}),a("crypto-util",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;m=32,e=8,g=m/e,f=g*e,d=2,i=16,l="0",j=255,k=4294967295,h=15,o=function(a,b,c){return(a|b<<m-e-c%g*e)>>>0},n=function(a){var b,c,d;for(c=[],b=2*g,d=0;d<a.length;)c.push(a.substr(d,b)),d+=b;return c},b.BITS_PER_BYTE=e,b.BITS_PER_WORD=f,b.BYTES_PER_WORD=g,b.MAX_BYTE=j,b.MAX_WORD=k,b.WORD_SIZE=m,b.pad=function(a,b,c){var d,e,f,g;for(c=c||m,b=b||l,d=[],f=a.length,g=c-f,e=0;g>e;)d.push(b),++e;return d.join("")+a},b.fromWordToBytesArray=function(a){var b,c,d,f;for(f=[],b=c=0,d=g;d>=0?d>c:c>d;b=d>=0?++c:--c)f.push(a>>>m-e-b%g*e&j);return f},b.fromBytesArrayToWord=function(a){var b,c,d,e,f;for(f=0,c=d=0,e=a.length;e>d;c=++d)b=a[c],f=o(f,b,c);return f},b.toWord=function(a){return b.pad(Number(a).toString(d))},b.fromWord=function(a){return parseInt(a,d)},b.toHex=function(a){return Number(a).toString(i)},b.fromHex=function(a){return parseInt(a,i)},b.rotl=function(a,b,c){return a<<b|a>>>(c||m)-b},b.rotr=function(a,b,c){return a>>>b|a<<(c||m)-b},b.fromWordsToLatin1=function(a){var c,d,e,f,g,h,i,j;for(h="",d=0,f=a.length;f>d;d++)for(j=a[d],i=b.fromWordToBytesArray(j),e=0,g=i.length;g>e;e++)c=i[e],h+=String.fromCharCode(c);return h},b.fromLatin1ToWords=function(a){var b,c,d;for(d=[],b=0,c=a.length;c>b;)d[b>>>2]|=(a.charCodeAt(b)&j)<<m-e-b%g*e,b++;return d},b.fromWordsToUtf8=function(a){try{return decodeURIComponent(escape(b.fromWordsToLatin1(a)))}catch(c){throw new Error("Malformed UTF-8 data")}},b.fromUtf8ToWords=function(a){return b.fromLatin1ToWords(unescape(encodeURIComponent(a)))},b.fromWordsToHex=function(a){var b,c,d,f;for(f=g*a.length,c=[],d=0;f>d;)b=a[d>>>2]>>>m-e-d%g*e&j,c.push((b>>>g).toString(i)),c.push((b&h).toString(i)),d++;return c.join("")},b.fromHexToWords=function(a){var c,d,e,f;for(e=n(a),f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(b.fromHex(a));return f},b.calculateSigBytesForWords=function(a){var c,d,e,f,g,h,i,j;for(i=0,d=0,f=a.length;f>d;d++)for(j=a[d],h=b.fromWordToBytesArray(j),e=0,g=h.length;g>e;e++)c=h[e],c&&(i+=1);return i}});var d=function(a,b){return function(){return a.apply(b,arguments)}},c=[].slice,f={}.hasOwnProperty;a("dag",function(a,b,e){var g,h;h=a("underscore"),g=function(){function a(){var a;a=1<=arguments.length?c.call(arguments,0):[],this.toArray=d(this.toArray,this),this.size=d(this.size,this),this.add=d(this.add,this),this._roots=[],this._edges=[],this._dependencies={},this.add.apply(this,a)}return a.prototype.add=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p;for(g=1<=arguments.length?c.call(arguments,0):[],(m=this._edges).push.apply(m,g),null==this._dependencies&&(this._dependencies={}),h=0,j=g.length;j>h;h++)n=g[h],e=n[0],f=n[1],null==(d=this._dependencies)[f]&&(d[f]={}),this._dependencies[f][e]=!0;for(b={},this._roots=[],o=this._edges,i=0,k=o.length;k>i;i++)p=o[i],l=p[0],a=p[1],""+l in this._dependencies||""+l in b||(b[l]=l,this._roots.push(l));return this},a.prototype.size=function(){return this._edges.length},a.prototype.toArray=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n;for(m={},d=this._edges.slice(),n=this._roots.slice(),j=[];null!=(i=n.pop());)for(j.push(i),e=0,h=d.length;h>e;e++)if(k=d[e],b=k[0],c=k[1],b===i){a=!0,null==m[c]&&(m[c]={}),m[c][b]=!0,l=this._dependencies[c];for(g in l)f.call(l,g)&&null==m[c][g]&&(a=!1);a&&n.push(c)}return j},a}(),b.create=function(){var a,b;return a=1<=arguments.length?c.call(arguments,0):[],(b=new g).add.apply(b,a)},b.DirectedAcyclicGraph=g}),a("data-rewrite",function(a,b,c){var d,e,f,g,h,i,j,k,l;d=a("underscore"),l=a("util"),e=a("config"),h=a("expression"),f=a("data"),g=l.rewriter({country:"user_attr_kx_geo_country",sub_section:"subsection",segment:"user_segments"}),j=l.rewriter({"=":"is","!=":"isnt",before:"<",after:">"}),k=function(a){return a=String(a),a.match(/,/)?"["+a.split(", ").join(",")+"]":a},i=b.expression=function(a){var b,c,e,f,i,l,m;if(c=j(a.operator),i=g(a.name),b=a.delimiter,m=d.isArray(a.value)?"["+a.value.join(",")+"]":k(a.value),f=function(a,b,c){var d,e,f,g;for(f=[],d=0,e=a.length;e>d;d++)g=a[d],f.push([b,"$"+c,g]);return f},e=d.isArray(h.get(i,b)),l=h.parse(m),d.isArray(l)){if("is"===c&&(c=e?"intersects":"memberOf"),"isnt"===c&&(c=e?"notIntersects":"notMemberOf"),"url"===i&&!e){if("contains"===c)return["or"].concat(f(l,c,i));if("notContains"===c)return["and"].concat(f(l,c,i))}}else e&&("is"===c&&(c="contains"),"isnt"===c&&(c="notContains"));return b=b?":"+b:"",[c,"$"+i+b,m]},b.tag=function(a){var b;return f.get("schema_version",2)>=3||e.init().get("params.tag_source",!1)||(a=d.extend({},a,{criteria:["and"].concat(function(){var c,d,e,f;if(a.criteria){for(e=a.criteria,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(i(b));return f}return[]}())})),null==a.criteria&&(a.criteria=[]),a.freq_cap&&a.criteria.push(["<","$tag_deliveries_today",a.freq_cap]),a.user_percent&&a.criteria.push(["<",["random"],a.user_percent]),delete a.rules,/^\s*\/\/@eval\b/.test(a.content)&&(a.method="eval"),null==a.name&&(a.name="Anonymous"),null==a.timing&&(a.timing="onload"),a.random=100*Math.random(),a},h.setDelimiter("user_segments",","),b.contextTermExpression=function(a){var b,c,d;return b=a.occurrences,d=a.values,h=function(){switch(j(a.operator)){case"is":return["or"].concat(function(){var a,e,f,g;for(f=d.split(","),g=[],a=0,e=f.length;e>a;a++)c=f[a],g.push([">=","$context_term_"+c,(null!=b?b.min:void 0)||1]);return g}());default:return["and"].concat(function(){var a,b,e,f;for(e=d.split(","),f=[],a=0,b=e.length;b>a;a++)c=e[a],f.push(["is","$context_term_"+c,0]);return f}())}}(),["and","$context_terms_processed",h]}});var f={}.hasOwnProperty;a("data",function(a,b,c){var d,e,g,h,i,j,k,l,m,n;d=a("underscore"),n=a("util"),e=a("events"),l=a("routes"),k=b.root={},g=function(a){return a.match(/_/)?a:"_"+a},b.get=function(a,b){var c;return null!=(c=k[g(a)])?c:b},b.set=function(a,c){var g,h,i;return d.isString(a)?(h=m(a,c),e.fire("data:change",{key:a,value:h}),h):function(){var c;c=[];for(g in a)f.call(a,g)&&(i=a[g],c.push(b.set(g,i)));return c}()},m=b.setSilently=function(a,b){return k[g(a)]=b},b.remove=function(a){delete k[a]},b.append=function(a,c){var e,h,i;return d.isString(a)?(a=g(a),h=null!=b.get(a)?b.get(a):[],d.isArray(h)||(h=[h]),h.push(c),b.set(a,d.uniq(h))):function(){var c;c=[];for(e in a)f.call(a,e)&&(i=a[e],c.push(b.append(e,i)));return c}()},b.raw=function(){return k},i=b.namespace=function(a,c){var d,g,h,i,j;return i=a+"_",g=void 0,j=new RegExp(i+"(.+)"),d=n.attributes({get:function(a){return b.get(i+a)},set:function(a,c){return b.set(i+a,c)},all:function(){var a,b,c;b={};for(a in k)f.call(k,a)&&(c=k[a],g=a.match(j),null!=g&&(b[g[1]]=c));return b},values:c}),h=void 0,d.change=function(a){h||(h=[],e.on("data:change",function(b){var c,d;if(g=b.key.match(j),null!=g)for(c=0,d=h.length;d>c;c++)(a=h[c])(b)})),h.push(a)},d},b.user_attr=i("user_attr"),b.page_attr=i("page_attr"),l.simple("set",b.set),l.simple("get",b.get),l.simple("append",b.append),l.regexp(/data:(.+)/,function(a,b){return i(a[1],b)}),j=window.navigator,h=j.language||j.browserLanguage||j.userLanguage||j.systemLanguage,h&&(h=h.replace("_","-"),h=h.toLowerCase()),b.user_attr("kx_lang",h),b.user_attr("kx_tech_browser_language",h)}),a("dom-iframe",function(a,b,c){var d,e,f;e=a("underscore"),f={target:null,targetAction:"append",html:"",attr:{}},d=function(b){var c;c=a("dom"),this.options=e.extend({},f,b||{}),this.node=c.createElement("iframe",this.options.attr),"function"==typeof this.options.onload&&c.onload(this.node,this.options.onload),this.insert(),this.options.attr.src&&!this.options.html||this.html(this.options.html||"")},d.prototype={insert:function(){var b,c,e;c=this.options,b=c.targetAction,e=c.target||window.document.body,a("dom").insert(b,e,this.node),this.win=d.window(this.node),this.doc=d.document(this.node)},html:function(a){var b;b=this.doc,a.match(/^<html>/)||(a="<html><head></head><body>"+a+"</body></html>"),b.open(),b.write(a),b.close()}},d.window=function(a){return a.contentWindow},d.document=function(a){return d.window(a).document},b.IFrame=d});var f={}.hasOwnProperty,d=function(a,b){return function(){return a.apply(b,arguments)}},c=[].slice;a("dom",function(a,b,e){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;for(i=a("underscore"),Q=a("util"),J=a("sniff"),p=a("events"),z=a("json"),L=[a("dom-iframe"),J],I=window.setTimeout,g=window.document.documentElement.attachEvent?"attachEvent":"addEventListener",x=0,B=L.length;B>x;x++){K=L[x];for(A in K)f.call(K,A)&&(R=K[A],b[A]=R)}b.browserBucket=J.bucket,H=new Q.Set(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed"]),y=function(a){return!!H[a]},l=b.attr=function(a,b,c){var d,e;if(e="",void 0!==c)return a.setAttribute(b,c),a;try{return a.getAttribute(b)||null!=(d=a.attributes[b])&&d.value||e}catch(f){return e}},b.removeAttr=function(a,b){return a.removeAttr(b)},N=b.text=function(a){return a.innerText||a.textContent},b.value=function(a){switch(a.nodeName){case"INPUT":return l(a,"value");case"TEXTAREA":return N(a)}},b.StringStream=h=function(){function a(){var a;return a=1<=arguments.length?c.call(arguments,0):[],this.stream=d(this.stream,this),this.data=d(this.data,this),this._buffer=a,this.stream.data=this.data,this.stream}return a.prototype.data=function(){return this._buffer.join("")},a.prototype.stream=function(){var a,b;return a=1<=arguments.length?c.call(arguments,0):[],(b=this._buffer).push.apply(b,a)},a}(),S=function(a,b,c){var d,e,g,j,k,l,m,n;null==b&&(b=new h),null==c&&(c=0),j=i.defaults(a,{attributes:{},children:[]}),n=j.tagName,d=j.attributes,g=j.children,m=y(n),b("<",n);for(A in d)f.call(d,A)&&(R=d[A],b(" ",A,'="',R,'"'));if(m)return b("/>"),b;if(b(">"),"string"==typeof g)b(g);else for(k=0,l=g.length;l>k;k++)e=g[k],S(e,b,c+1);return b("</",n,">"),b},n=function(a,b,c){var d;return null==b&&(b={}),null==c&&(c=[]),d="string"!=typeof a?a:{tagName:a,attributes:b,children:c},S(d).data()},w=function(a){var b;return b=window.document.createElement("div"),b.innerHTML=a,b.childNodes},v=function(a){return w(a)[0]},b.byId=function(a){return(null!=a?a.nodeType:void 0)?a:window.document.getElementById(a)},u=b.head=function(a){return null==a&&(a=window.document),a.head||a.getElementsByTagName("head")[0]},b.document=function(a){return a.document||a.ownerDocument||a},b.window=function(a){var c;return c=b.document(a),c.parentWindow||c.defaultView},b.create=b.createElement=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],v(n.apply(null,a))},G=b.remove=function(a){a.parentNode.removeChild(a)},b.isNode=function(a){return!!a.nodeType},m=b.before=function(a,b){a.parentNode.insertBefore(b,a)},k=b.append=function(a,b){a.appendChild(b)},b.after=function(a,b){var c;return c=a.nextSibling,c?m(c,b):k(a.parentNode,b)},b.prepend=function(a,b){var c;return c=a.firstChild,c?m(c,b):k(a,b)},b.insert=function(a,c,d){return 3===arguments.length?b[a](c,d):(d=a,m(window.document.getElementsByTagName("script")[0],d))},b.replace=function(a,b){return m(a,b),G(a)},b.scriptEval=function(a){var b;b=window.document.createElement("script"),b.text=a,u(window.document).appendChild(b)},b.winEval=function(a,b){var c;return a.kxeval||(c="(function(){,\n  var win = this;,\n  win.kxeval = win.execScript ? ,\n    function(expr){return win.execScript(expr);} :,\n    function(expr){return win.eval(expr);};,\n})();",a.execScript?a.execScript(c):a.eval(c)),a.kxeval(b)},b.childElements=function(a){var b,c,d,e,f;for(c=[],f=a.childNodes,d=0,e=f.length;e>d;d++)b=f[d],1===b.nodeType&&c.push(b);return c},b.onload=function(a,b){var c,d,e,h,i,j,k;"function"==typeof b&&(b={done:b}),c=b.done,h=b.fail,c=Q.once(c||Q.noop),h=Q.once(h||Q.noop),k=function(){return a.readyState&&a.readyState.match(/complete|loaded/)?c():void 0},e={load:c,error:h,readystatechange:k},j=a.attachEvent?"on":"";for(d in e)f.call(e,d)&&(i=e[d],a[g](j+d,i,!0))},t="_krux_hash",s=1,r=b.hash=function(a){return a[t]||(a[t]=s++)},C={},b.meta=function(a){var b;return b=r(a),C[b]||(C[b]={node:a,hash:b})},E=!!window.attachEvent,j=b._on_=E?"attachEvent":"addEventListener",P=b.type={ready:{target:window.document},load:{target:window},unload:{target:window},beforeunload:{target:window}},F=b.on=function(a,b,c,d){b=E?"on"+b:b,a[j](b,c,d||!1)},b.d2on=window.addEventListener?function(a,b,c){return a.addEventListener(b,c,!1),{remove:function(){a.removeEventListener(b,c)}}}:function(a,b,c){return a.attachEvent(b,c),{remove:function(){a.detachEvent(b,c)}}};for(D in P)f.call(P,D)&&(M=P[D],M.nativeName="ready"!==D?D:E?"readystatechanged":"DOMContentLoaded",b[D]=function(a){return function(b){p.onOnce("dom:"+a,b)}}(D));if(q=function(a,b){return null==b&&(b=void 0),"load"!==a?function(){p.fireOnce("dom:"+a,b)}:function(){p.fireOnce("dom:ready",b),p.fireOnce("dom:load",b)}},o=function(){try{window.document.documentElement.doScroll("left")}catch(a){return void I(o,1)}p.fireOnce("dom:ready")},b.createHead=function(c,d){var e,f,g;return g=a("sizzle"),(e=i.first(g.find('.kxhead[data-id="'+c+'"]')))?e:(b.kxhead=e=b.create("div",{"class":"kxhead","data-id":c,style:"display:none !important;"}),d?b.before(d,e):b.append(window.document.body,e),f=b.insert,b.insert=function(a){1===arguments.length?b.append(e,a):f.apply(b,arguments)},e)},b.addStylesheet=function(a){var c;if(null!=a)return c=window.document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=a,b.append(b.head(window.document),c)},b.baseDomain=function(a){var b;return b=String(a).replace(/:\d+$/,""),/(?:\d{1,3}\.){3}\d{1,3}/.test(b)?"":b.replace(/.*?((?:(^|\.)[^\.]+){1,2}(?:\.com)?)$/,"$1").replace(/^\./,"")},b.safeMode=function(){return window.location.href.indexOf("krux_safe")>-1||J.ie&&J.version<8||J.ff&&J.version<4||!window.document.readyState||function(){var a;try{return null==(null!=(a=window.JSON)&&"function"==typeof a.parse?a.parse("true"):void 0)}catch(b){return!0}}()},/^(complete|loaded)$/.test(window.document.readyState))q("load")();else{if(J.ie){F(window,P.load.nativeName,q("ready")),O=!1;try{O=null==window.frameElement}catch(T){}window.document.documentElement.doScroll&&O&&o()}for(D in P)f.call(P,D)&&(M=P[D],F(M.target,M.nativeName,q(D),!1))}I(function(){return q("load",{timedout:!0})},6e3)});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("events",function(a,b,c){var e,f,g,h;f=a("underscore"),h=a("util"),b.Events=e=function(){function a(){this.clear=d(this.clear,this),this.happened=d(this.happened,this),this.onOnceAll=d(this.onOnceAll,this),this.fireOnce=d(this.fireOnce,this),this.onOnce=d(this.onOnce,this),this.fire=d(this.fire,this),this.off=d(this.off,this),this.on=d(this.on,this),this._handlers={ALL:[]},this._happened={}}return a.prototype.on=function(a,b){f.isString(a)?(null==this._handlers[a]&&(this._handlers[a]=[]),this._handlers[a].push(b)):f.isFunction(a)?this._handlers.ALL.push(a):this.on(function(c){a.test(c.type)&&b(c)})},a.prototype.off=function(a,b){this._handlers[a]=b?h.remove(this._handlers[a],b):[]},a.prototype.fire=function(a,b){var c,d,e,f,g,i,j;if(b=b||{},b.type||(b.type=a),this._happened[a]=b,"data:change"!==b.type&&h.log(b),null!=this._handlers[a])for(i=this._handlers[a],d=0,f=i.length;f>d;d++)(c=i[d])(b);if(null!=this._handlers.ALL)for(j=this._handlers.ALL,e=0,g=j.length;g>e;e++)(c=j[e])(b);return b},a.prototype.onOnce=function(a,b){var c;return(c=this._happened[a])?h.defer(b,c):this.on(a,h.once(b))},a.prototype.fireOnce=function(a,b){return!this._happened[a]&&this.fire(a,b)},a.prototype.onOnceAll=function(a,b){var c,d,e,f;for(a=a.split(" "),b=h.once(b),c=function(c){return function(){var d,e,f;for(d=0,e=a.length;e>d;d++)if(f=a[d],!c._happened[f])return;b()}}(this),d=0,e=a.length;e>d;d++)f=a[d],this.onOnce(f,c)},a.prototype.happened=function(a){return this._happened[a]},a.prototype.clear=function(a){var b,c,d;c=this._happened,this._happened={};for(b in c)d=c[b],a&&0!==b.indexOf(a)&&(this._happened[b]=d)},a}(),g=b.instance=new e,b.on=g.on,b.off=g.off,b.fire=g.fire,b.onOnce=g.onOnce,b.fireOnce=g.fireOnce,b.onOnceAll=g.onOnceAll,b.happened=g.happened,b.clear=g.clear}),a("expression",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(d=a("underscore"),A=a("util"),g=a("data"),y=a("store"),p=a("tag-delivery").isIdDelivered,o=d.isArray,q=d.isString,h={},i={},m=b.getDelimiter=function(a){return g.get(a+"DELIM")},x=b.setDelimiter=function(a,b){m(a)!==b&&g.setSilently(a+"DELIM",b)},l=b.get=function(a,b){var c;return c=g.get(a),b&&x(a,b),b=m(a),d.isArray(c)?c:b?c?c.split(b):[]:c},v=b.parse=function(a){var b,c,e,f,g,h,i,j,k,m;switch(!1){case!!d.isString(a):return a;case!(g=a.match(/^\$([^:]+)(?::(.*))?$/)):return l(g[1],g[2]);case!(g=a.match(/^\[\s*((?:"|').*(?:"|'))\s*]$/)):for(i=g[1].replace(/(?:^\s*["'])|(?:["']\s*$)/g,"").split(/(?:['"]\s*,\s*['"])/),k=[],b=0,e=i.length;e>b;b++)h=i[b],k.push(v(h));return k;case!(g=a.match(/^\[\s*(.*)\s*]$/)):for(j=g[1].split(/\s*,\s*/),m=[],c=0,f=j.length;f>c;c++)h=j[c],m.push(v(h));return m;case!(g=a.match(/^"(.*)"$/)):return decodeURIComponent(g[1]);default:return a}},k=function(a){var b;return b=j(a),null!=b?h[b]||i[b]:void 0},f=function(a,b){var c,e,f,g,h;switch(!1){case!b.isMacro:return a.slice(1);case!!d.isFunction(b):return a;default:for(f=a.slice(1),g=[],c=0,e=f.length;e>c;c++)h=f[c],g.push(j(h));return g}},e=function(a){var b;return b=k(a[0]),b.apply(this,f(a,b))},j=b.eval=function(a){switch(!1){case!(o(a)&&0===a.length):return!0;case!(o(a)&&d.isFunction(k(a[0]))):return e(a);case!q(a):return v(a);default:return a}},d.extend(h,{afterTag:p,beforeTag:A.negate(p),contains:function(a,b){var c;return null==a&&(a=[]),c=(""+b).toLowerCase(),d.isArray(a)?d.any(a,function(a){return(""+a).toLowerCase()===c}):-1!==(""+a).toLowerCase().indexOf(c)},endsWith:function(a,b){return h.matches(a,A.escapeRegexp(b)+"$")},intersection:d.intersection,intersects:function(a,b){return a=d.isArray(a)?a:[a],b=d.isArray(b)?b:[b],d.any(a,function(a){return h.contains(b,a)})},is:function(a,b){return d.isString(a)?a.toLowerCase()===String(b).toLowerCase():a===b},matches:function(a,b){try{return new RegExp(b).test(a)}catch(c){return!1}},memberOf:function(a,b){return h.contains(b,a)},now:function(){return new Date},random:function(){return Math.random()},startsWith:function(a,b){return h.matches(a,"^"+A.escapeRegexp(b))}}),t=function(a){switch(a){case"<":return function(a,b){return b>a};case">":return function(a,b){return a>b};case"<=":return function(a,b){return b>=a};case">=":return function(a,b){return a>=b};case"==":return function(a,b){return a===b};case"!=":return function(a,b){return a!==b};default:return function(){return!1}}},w=["<",">","<=",">=","==","!="],n=0,r=w.length;r>n;n++)z=w[n],h[z]=t(z);d.extend(h,{isnt:A.negate(h.is),isNot:A.negate(h.is),notContains:A.negate(h.contains),notIntersects:A.negate(h.intersects),notMemberOf:A.negate(h.memberOf)}),d.extend(i,{and:function(){return d.every(arguments,j)},or:function(){return d.any(arguments,j)}}),d.extend(i,{andNot:A.negate(i.or)});for(u in i)s=i[u],s.isMacro=!0}),a("feature",function(a,b,c){var d;d=a("sniff"),b.hasThirdPartyCookies=function(){return d.is!==d.Browsers.SAFARI},b.hasLocalStorage=function(){var a;a=!1;try{localStorage.setItem("kxtest","test"),a="test"===localStorage.getItem("kxtest"),localStorage.removeItem("kxtest")}catch(b){}return a}});var g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a("fingerprint-scraper",function(a,b,c){var d,e,f,h,i,j;d=a("underscore"),j=a("util"),e=b.all=function(a,b){var c,d,e,f;null==b&&(b=j.yes),e=j.deref(a),d=[];for(c in e)f=e[c],b(f,c,e)&&null!=f&&d.push(f);return d},b.path=j.deref,f=function(a){return function(b,c){return a(b,function(a,b){return g.call(c,b)>=0})}},b.keys=f(e),h=b.pluckAll=function(a,b){var c,d,e,f,g,h,i;for(null==b&&(b=j.yes),c=j.deref(a),c.length||(c=j.values(c)),h=[],d=0,f=c.length;f>d;d++){g=c[d];for(e in g)i=g[e],g.hasOwnProperty(e)&&b(i,e,g)&&h.push(i)}return h},i=b.pluckKeys=f(h),b.pluckKeysWhere=function(a,b,c){var d,e,f,g,h,j;for(g=i(a,b),h=[],d=e=0,f=g.length;f>e;d=++e)j=g[d],c(j,d,g)&&h.push(j);return h},b.primitives=d.partial(e,d,j.isPrimitive),b.serializable=d.partial(e,d,j.isSerializable)}),a("fingerprint",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;e=a("underscore"),f=a("cache"),k=a("fingerprint-scraper"),n=a("sha1"),d=a("privacy").USER_ID_TTL,g=a("data"),o=a("timing"),h=a("events"),j=e.partial(k.keys,"navigator"),l=e.partial(k.keys,"screen"),p=function(a){return a[0]*a[1]},m=e.compose(l,p),b.detectors={mimeTypes:e.partial(k.pluckKeysWhere,"navigator.mimeTypes",["type","description","suffixes"],function(a){return""!==a&&e.isString(a)||e.isNumber(a)&&!e.isNaN(a)}),navigatorPrimitives:e.partial(j,["onLine","product","appCodeName","platform","appVersion","appName","vendorSub","vendor","productSub","cookieEnabled","language"]),plugins:e.partial(k.pluckKeys,"navigator.plugins",["name","filename","description"]),screenDepth:e.partial(l,["pixelDepth","colorDepth"]),screenResolution:e.partial(m,["availWidth","availHeight"]),screenSize:e.partial(m,["width","height"]),timezone:function(){return[(new Date).getTimezoneOffset()]},ua:function(){var a;return a=k.path("navigator.userAgent"),[String(a).replace(/([a-z0-9]){8}\-(\1{4})\-\2\-\2\-\1{12}/i,"")]}},b.raw=function(){var a,c,d,e,f;d=[],e=b.detectors;for(c in e){a=e[c];try{f=a(),d.push.apply(d,f)}catch(g){}}return d},i=function(){return n.hash(b.raw().sort().join(""))},b.init=function(a){var b,c;return c=a.get("fp_id"),b=f.create(i,{ttl:30*o.MINUTES})(),g.set("fp",b),a.set("fp",b,d),g.set("fp_id",c),h.onOnce("user_data_response",function(b){return b.kfuid?(g.set("fp_id",b.kfuid),a.set("fp_id",b.kfuid,d)):void 0}),b}}),a("flash",function(a,b,c){var d,e,f;d=function(a){try{return a.GetVariable("$version")}catch(b){}return""},e=function(a){var b;return b=a.split(","),{installed:!0,raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}},f=function(a){var b,c,d;return b=a.split(RegExp(" +")),c=b[2].split(/\./),d=b[3],{installed:!0,raw:a,major:parseInt(c[0],10),minor:parseInt(c[1],10),revision:parseInt(d.replace(/[a-zA-Z]/g,""),10)||d,revisionStr:d}},b.version=function(){var b,c,g;if(c=a("util"),g="",b=null,null!=window.navigator.plugins&&window.navigator.plugins.length>0){if(g=c.deref(window.navigator,"mimeTypes.application/x-shockwave-flash.enabledPlugin.description"))return f(g)}else if(-1===window.navigator.appVersion.indexOf("Mac")&&null!=window.execScript){try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),g="6,0,21",b.AllowScriptAccess="always",g=d(b)}catch(h){}try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),g=d(b)}catch(h){}if(g)return e(g)}return{installed:!1,raw:"",major:"",minor:"",revision:"",revisionStr:""}}});var f={}.hasOwnProperty;a("geo",function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t;g=a("underscore"),t=a("util"),h=a("config"),m=a("json"),p=a("privacy"),q=a("store"),i=a("data"),k=a("events"),r=a("timing"),e=24*r.HOURS,n=function(a){return String(a).toLowerCase()},o=function(a){var b,c,d;for(b in a)f.call(a,b)&&(d=a[b],c=n(b),c!==b&&(delete a[b],a[c]=d));return a},j=function(a){var b,c,d,e;for(e=["country","region","city","dma"],b=0,d=e.length;d>b;b++)c=e[b],i.set("user_attr_kx_geo_"+c,a[c]||a[c.toUpperCase()])},s=function(a){"function"==typeof q.set&&q.set("geo",t.paramString(a),e)},l=function(){return q.impl?t.parseParams(q.get("geo")):{}},d="geo",b.get=function(a){var b;return h.get("params.no_pii")||p.isOptOut()?void 0:(b=i.get(d)||{},a?b[n(a)]:b)},b.set=function(a,b){h.get("params.no_pii")||p.isOptOut()||(null!=b?i.get(d)[n(a)]=b:i.set(d,o(a)))},b.receive=function(a){h.get("params.no_pii")||p.isOptOut()||(b.set(a),j(a),k.fireOnce("geo:ready",b))},b.init=function(){var a,c;return h.get("params.no_pii")||p.isOptOut()?(h.set(d,{}),b):(c=h.get(d),g.isString(c)&&h.set(d,c=m.parse(c)),g.isEmpty(c)?(k.on("user_data_response",function(a){var c;c=(a||{}).geo||{},s(c),b.receive(c)}),a=l(),g.isEmpty(a)||b.receive(a)):(b.receive(c),s(c)),b)}});var c=[].slice;a("hash-set",function(a,b,d){var e,f;f=a("underscore"),e=function(){function a(){var a,b;a=arguments[0],b=2<=arguments.length?c.call(arguments,1):[],this._hash=function(b){var c;return c=f.isFunction(a)?a(b):b,String(void 0!==c?c:b)},this._q=[],this.put.apply(this,b),this._items={}}return a.prototype.put=function(){var a,b;return a=1<=arguments.length?c.call(arguments,0):[],(b=this._q).push.apply(b,a),this},a.prototype.get=function(a){return this._thunk(),this._items[this._hash(a)]},a.prototype.has=function(a){return this._thunk(),this._hash(a)in this._items},a.prototype.remove=function(){var a,b,d,e;for(d=1<=arguments.length?c.call(arguments,0):[],this._thunk(),a=0,e=d.length;e>a;a++)b=d[a],delete this._items[this._hash(b)];return this},a.prototype.toArray=function(){var a,b,c,d;this._thunk(),b=this._items,c=[];for(a in b)d=b[a],c.push(d);return c},a.prototype.fromArray=function(a){return this.put.apply(this,a),this},a.prototype.toString=function(){var a;return this._thunk(),function(){var b;b=[];for(a in this._items)b.push(a);return b}.call(this).join(",");
},a.prototype.empty=function(){return this._q=[],this._items={},this},a.prototype.size=function(){var a;return this._thunk(),function(){var b;b=[];for(a in this._items)b.push(a);return b}.call(this).length},a.prototype._thunk=function(){var a,b,c,d;for(d=this._q.splice(0,this._q.length),a=0,c=d.length;c>a;a++)b=d[a],this._items[this._hash(b)]=b;return this},a}(),b.create=function(){var a,b,d;return b=arguments[0],d=2<=arguments.length?c.call(arguments,1):[],a=new e(b),a.put.apply(a,d),a},b.HashSet=e}),a("http-jsonp",function(a,b,c){var d,e,f,g,h;f=a("events"),h=a("ns"),b.createScript=function(a){var b,c;return c=window.document.createElement("script"),c.type="text/javascript",c.src=a,b=window.document.getElementsByTagName("script")[0],b.parentNode.insertBefore(c,b)},g=null!=(e=h.self).inFlightKeys?e.inFlightKeys:e.inFlightKeys={},b.Request=d=function(){function c(b){var d,e;if(null==b.data&&(b.data={}),this.options=b,!b.callback)throw new Error("Callback name is required");for(d in b)e=b[d],this[d]=e;this.self&&(this.done=function(a){var b;return(b=this.self).done.apply(b,a)},this.fail=function(a){var b;return(b=this.self).fail.apply(b,a)}),this.plantReceiver(),this.src=a("http").src(this),c.all.push(this)}return c.all=[],c.prototype.fail=function(a){var b;b=a&&a.status||"unknown",f.fire("error",{message:"jsonp failed with status "+b+" src: "+this.src})},c.prototype.done=function(){},c.prototype.receive=function(a){return this.time.end=new Date,a.status?"200"===String(a.status)?this.done(a.body):this.fail(a):this.done(a)},c.prototype.plantReceiver=function(){var a;a=this.options.callback,this.data.callback=h.path+"."+a,g[a]=g[a]||0,g[a]++,h.self[a]=function(b){return function(){g[a]--,0===g[a]&&delete h.self[a],b.receive.apply(b,arguments)}}(this)},c.prototype.sendInline=function(){var a;return a='<script src="'+this.src+'" type="text/javascript"></script>',window.document.write(a),this},c.prototype.send=function(){return this.time={start:new Date},this.inline?this.sendInline():b.createScript(this.src),this},c.clear=function(){return c.all=[]},c}(),b.call=function(a){return new d(a).send()},b.clear=d.clear});var f={}.hasOwnProperty;a("http",function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t;e=a("underscore"),s=a("util"),k=a("feature"),m=a("json"),j=a("events"),p=a("sniff"),t=a("uuid"),o=b.protocol="https:"===window.location.protocol?"https:":"http:",d=b.REQUEST_ID_KEY="request_id",b.maxUrlLength=p.is===p.Browsers.IE?2030:8e3,n=b.param=function(a,b){var c;return c=e.isString(b)||e.isNumber(b)?b:m.stringify(b),encodeURIComponent(a)+"="+encodeURIComponent(c)},r=function(a,b){return a.match(/^\/\//)&&(a=o+a),b.length>0?a+"?"+b.join("&"):a},l=e.compose(function(a){return a.length>b.maxUrlLength},r),i=function(a,b){return[d+"="+b].concat(a)},h=function(a){return a+"&pageview=false"},g=function(b){var c;return c=a("data"),a("config").init().get("params.first_party_uid",!1)&&!k.hasThirdPartyCookies()&&(null==b.data&&(b.data={}),b.data._kuid=c.get("user")),b},q=b.srcs=function(a){var b,c,d,g,h,j,k,m,o,p,q,s,u;if(a=e.clone(a),s=a.url=a.url||"no_url",o=t(),q=e.partial(r,s),c=e.partial(l,s),k=function(){var b,c;b=a.data,c=[];for(g in b)f.call(b,g)&&(u=b[g],null!=u&&""!==u&&c.push(n(g,u)));return c}(),a.noClip)return[q(k)];for(b=function(a,d){var e;for(d=d||[],e=[],a=i(a,o);c(a)&&a.length;)e.push(a.pop());return d.push(a),e.length>0&&a.length>0?b(e,d):(1===d.length&&d[0].shift(),d)},m=b(k),p=[],d=0,h=m.length;h>d;d++)j=m[d],p.push(q(j));return p},b.src=function(a){var c;return c=q(a),c.length>1&&j.fire("http:error",{code:"overflow",message:"Too many params for a single URL (max = "+b.maxUrlLength+").\nUsing first URL chunk; use http#srcs instead to handle long URLs"}),e.head(c)},b.willClip=function(a){var c;return c=b.src(e.extend({noClip:!0},a)),c.length>b.maxUrlLength&&c.length-b.maxUrlLength},b.pixel=function(a){var c,d,e,f,i;try{for(f=q(g(a)),c=d=0,e=f.length;e>d;c=++d)i=f[c],b.createImage(c>0?h(i):i);j.fire("http:pixel",a)}catch(k){}},b.createImage=function(a){return(new Image).src=a},b.ping=function(a){var c,d,e,h;try{d=g(a),e=function(){var a,b;a=d.data,b=[];for(c in a)f.call(a,c)&&(h=a[c],null!=h&&""!==h&&b.push(n(c,h)));return b}(),b.createImage(r(d.url,e))}catch(i){}},b.jsonp=function(b){return a("http-jsonp").call(g(b))},b.clearRequestList=function(){return a("http-jsonp").clear()}}),a("impression",function(a,b,c){var d,e,f;e=a("pixel"),d=a("data"),f=b.send=function(a){d.set("url_pixel",a.url),e.sendImpl(a)},b.init=function(a){f(a)}}),a("index",function(a,b,c){var d,e;return null==(e=null!=window.Krux?window.Krux:window.Krux=function(){window.Krux.q.push(arguments)}).q&&(e.q=[]),d=window.Krux,!d.commit||d.ns?(null==d.commit&&(d.commit=1),c.exports=window.Krux=function(b,c){var e,f,g;if(null==c.params&&(c.params={}),f=c.params.control_tag_namespace,window.Krux=d,e=a("ns").init(f,function(){return a("routes").call}))switch(!1){case"proxy"!==(null!=(g=d.q[0])?g[0]:void 0):d.q.shift(),a("proxy").server(c);break;case"marketer"!==c.params.client_type:a("marketer").init(e,c);break;default:a("publisher").init(e,c)}}):void 0}),a("jslog",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;d=a("underscore"),t=a("util"),h=a("dom"),n=a("http"),r=a("sniff"),f=a("data"),k=a("events"),g=window.location.search.indexOf("kxdebug")>-1,j=[],q=[],m=function(a){if(console&&g,k.happened("jslog.pixel")){if(a.msg===q[q.length-1])return;if(q.length>10*Math.random())return;q.push(a.msg),a.type+="-postload",j.push(a),n.pixel(l()),j=[]}else j.push(a)},p=function(a){var b;return b=/https*:\/\/([^\/]+)\/([^?\/]+)/.exec(a),b&&"apiservices.krxd.net"===b[1]?"service:"+b[2]:b&&b[1].indexOf("krxd.net")>-1?"controltag":""},i=b.errorTypes=["controltag","tag","test","http","js"],o=window.onerror||function(){return!1},window.onerror=function(a,b,c){var d,e,f;try{return"string"!=typeof a?o.apply(window,arguments):(f=p(b)||"js",m({type:f,url:b,line:c,msg:a}),o.apply(window,arguments))}catch(e){d=e,console}return o.apply(window,arguments)},s=b.sortByPriority=function(a){var b;return b=function(a){var b;return b=d.indexOf(i,a.type),-1!==b?b:i.length},d.clone(a).sort(function(a,c){var d,e;return d=b(a),e=b(c),e>d?-1:d>e?1:0})},k.on("tag:fail",function(a){m({type:"tag",tagid:a.id,msg:a.error})}),k.on("test:fail",function(a){m({type:"test",msg:a.code+":"+a.data})}),e=void 0,l=b.getPixelOptions=function(a){var b,c;for(b=a||{url:f.get("url_log"),data:{control_tag_version:window.Krux.version,commit:window.Krux.commit,pubid:f.get("pubid"),siteid:f.get("siteid"),site_name:f.get("site"),browser_bucket:r.bucket,version_bucket:e,lang:r.lang,log_version:1.1,errors:s(j)}},c=b.data.errors;n.willClip(b)&&c.length;)c.pop();return b},k.on("test:all_done",function(){var a;a="alpha"===f.get("config_param_control_tag_version")?1:.1,j.length>0&&t.rate(a)&&(n.pixel(l()),k.fire("jslog.pixel",{errors:j.length}),j=[])}),k.on("http:error",function(a){m({type:"http",msg:a.code+": "+a.message})})}),a("json",function(a,b,c){b.stringify=function(a,b){return null==b&&(b=""),null!=a?window.JSON.stringify(a):b},b.parse=function(a,b){return null==b&&(b={}),null!=a&&""!==a?window.JSON.parse(a):b}}),a("krux-uid",function(a,b,c){var d,e,f,g,h,i;return i=a("util"),f=a("underscore"),h=a("mersenne-twister"),d=function(){function a(a){var b,c,d,e,f;for(this.charMap=a,this._indexMap={},f=this.charMap,c=d=0,e=f.length;e>d;c=++d)b=f[c],this._indexMap[b]=c}return a.SHORT_ALPHABET=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"],a.LONG_ALPHABET=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],a.SHORT_CODEC=new a(a.SHORT_ALPHABET),a.LONG_CODEC=new a(a.LONG_ALPHABET),a.prototype.encode=function(a){var b,c,d;for(c=this.charMap.length,b=[];a>0;)d=a%c,a=Math.floor(a/c),b.push(this.charMap[d]);return b.reverse().join("")},a.prototype.decode=function(a){var b,c,d,e,f,g;for(e=a.length,g=0,b=d=0,f=e;f>=0?f>d:d>f;b=f>=0?++d:--d){if(c=this._indexMap[a.charAt(b)],null==c)throw new Error("Cannot decode "+a+" as a KruxUID.");g+=c,e-1>b&&(g*=this.charMap.length)}return g},a}(),e=function(){function a(b){var c,e;null==b&&(b=""+f.now()+String(h.next()).substring(3,6),b=b.substring(1,b.length-1),b=Number(b)),this.uid=function(){var f,g;switch(!1){case"number"!=typeof b:return b;case!a.isFallback(b):return this._fallback=b,-1;default:try{return d.LONG_CODEC.decode(b)}catch(f){c=f;try{return d.SHORT_CODEC.decode(b)}catch(g){return e=g,this._fallback=b,-1}}}}.call(this)}return a.prototype._fallback=void 0,a._guidRe=/^[a-z0-9]{8}-(?:[a-z0-9]{4}-){3}[a-z0-9]{12}$/i,a._oldIpSeparator=".",a.prototype.toShortId=function(){return null!=this._fallback?this._fallback:d.SHORT_CODEC.encode(this.uid)},a.prototype.toLongId=function(){return null!=this._fallback?this._fallback:d.LONG_CODEC.encode(this.uid)},a.prototype.toNumericId=function(){return this.uid},a.isFallback=function(b){return a._guidRe.test(b)||-1!==("function"==typeof b.indexOf?b.indexOf(a._oldIpSeparator):void 0)},a.fromShort=function(b){return new a(a.isFallback(b)?b:d.SHORT_CODEC.decode(b))},a.fromLong=function(b){return new a(a.isFallback(b)?b:d.LONG_CODEC.decode(b))},a}(),g=function(a){return new e(a)},g.fromShort=e.fromShort,g.fromLong=e.fromLong,c.exports=g}),a("marketer",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;f=a("underscore"),y=a("util"),h=a("config"),i=a("dom"),j=a("feature"),k=a("fingerprint"),n=a("impression"),p=a("privacy"),q=a("proxy"),r=a("data-rewrite").tag,s=a("routes"),t=a("sizzle"),u=a("store"),v=a("tag"),w=a("timing"),x=a("krux-uid"),l=a("geo"),d="data-kx-id",e=/^https?:\/\/([a-z0-9_\-\.]+\.)?krxd\.net(:\d{1,5})?(\/|$)/i,g=function(a,b){return i.attr(b,d,a),b},m=b.getParams=function(a){return y.urlParams(i.attr(a,"src"))},o=b.next=function(a){var b;if(b=f.find(t.find("script[src*="+a+"]"),function(a){return!i.attr(a,d)&&e.test(a.src)}),!b)throw new Error("No node found for "+a);return b},b.init=function(b,c){var d,e,t,z,A,B,C,D,E,F,G,H,I,J;if(D=new Date,e=h.init(c),t=e.get("confid"),I=t+"-"+D.getTime(),w.start(),v.claimOneTimers(e.get("tags")),a("jslog"),z=a("data"),z.set("tags",e.get("tags")||[]),z.user_attr=z.namespace("user_attr"),z.page_attr=z.namespace("page_attr"),a("scrape"),A=a("events"),C=g(I,o(t)),E=m(C),F=e.get("services"),!F||!F.impression)throw new Error("impression service not specified");return E.url=F.impression,z.set("confid",t),z.set("schema_version",e.get("app.schema_version")),z.set("pubid",z.get("pubid")||e.get("publisher.uuid")),e.get("params.no_pii")&&(z.set("pixel_data__knopii",1),z.user_attr("kx_lang",null),z.user_attr("kx_tech_browser_language",null)),a("test").init(),a("test-visualtags").init(),z.set("tags",e.get("tags")),z.set("config",e.toJSON()),z.set("version_bucket",e.get("params.control_tag_version")),z.set("max_segments",e.get("params.max_segments")),z.set("prioritized_segments",e.get("prioritized_segments")),z.namespace("url",e.get("services")),z.namespace("config_param",e.get("params")),B=!/localStorage/.test(z.get("config_param_client_side_storage")),u.init(B),a("segments"),p.init(),l.init(),i.safeMode()?(A.onOnce("dom:load",y.bind(A.fireOnce,null,"report")),void w.end()):(e.get("params.fingerprint")&&!p.isOptOut()&&k.init(u),e.get("params.first_party_uid")&&!j.hasThirdPartyCookies()&&(J=u.get("kuid")||x().toShortId(),z.set("user",J),p.storeKuid()),H=function(){var a,b,c,d;for(c=z.get("tags")||[],d=[],a=0,b=c.length;b>a;a++)G=c[a],d.push(r(G));return d}(),z.set("tags",H),z.set("config_segments",e.get("realtime_segments")),A.onOnceAll("dom:load tag:all_done",function(){A.fireOnce("report")}),d=a("adm-events"),d.parseConfig(e.get("realtime_segments",[])),d.check3rdParty(),a("stats"),a("social"),s.api(),e.has("context_terms")&&A.onOnce("dom:load",function(){a("context-terms").process(e.get("context_terms"))}),E._kpid=z.get("pubid"),n.init(E),e.get("params.store_realtime_segments",!1)&&q.client(function(a,b){if(null==a)try{return b.set("last_run",f.now())}catch(c){}}),window.setTimeout(v.init,250),void w.end())}});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("mersenne-twister",function(a,b,c){var e,f,g;f=a("underscore"),e=function(){function a(b){var c,e,g,h,i,j;for(null==b&&(b=f.now()),this.next=d(this.next,this),c=a.MATRIX_A,e=a.N,g=a.WORD_MASK,this.mt=[b&g],this.mag01=[0,c],h=i=1,j=e;j>=1?j>=i:i>=j;h=j>=1?++i:--i)this.mt[h]=1812433253*(this.mt[h-1]^this.mt[h-1]>>>30)+h;this.mti=h}return a.N=624,a.M=624,a.MATRIX_A=2567483615,a.UPPER_MASK=2147483648,a.LOWER_MASK=2147483647,a.WORD_MASK=4294967295,a.TEMPERING_MASK_B=2636928640,a.TEMPERING_MASK_C=4022730752,a.prototype.mt=[],a.prototype.mti=0,a.prototype.mag01=[],a.prototype.next=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(c=a.M,d=a.N,e=a.TEMPERING_MASK_B,f=a.TEMPERING_MASK_C,g=a.UPPER_MASK,b=a.LOWER_MASK,l=this.mag01,m=this.mt,q=0,this.mti>=d){for(h=j=0,n=d-c;n>=0?n>=j:j>=n;h=n>=0?++j:--j)q=m[h]&g|m[h+1]&b,m[h]=m[h+c]^q>>>1^l[1&q];for(i=k=o=h,p=d-1;p>=o?p>=k:k>=p;i=p>=o?++k:--k)q=m[i]&g|m[i+1]&b,m[i]=m[i+(c-d)]^q>>>1^l[1&q];q=m[d-1]&g|m[0]&b,m[d-1]=m[c-1]^q>>>1^l[1&q],this.mti=0}return q=m[this.mti+=1],q^=q>>>11,q^=q<<7&e,q^=q<<15&f,q^=q>>>18},a}(),g=new e,b.next=g.next,b.MersenneTwister=e}),a("ns",function(a,b,c){var d,e,f,g,h,i,j;g=a("underscore"),j=a("version"),e=window.Krux,f=b.NS_RE=/^ns:([\w\W]+)/,d=b.DEFAULT_NS="_default",i=b.parseArgs=i=function(a){var b,c,e;return c=a[0],e=void 0,b=c.match(f),b?(c=b[1],e=g.rest(a)):(c=d,e=a),{nsName:c,rest:e}},h=function(b){var c;return c={version:j.version,commit:j.commit,require:a("require-shim"),_:g},g.extend(b,c),b.isDefault&&g.extend(window.Krux,c),b},b.router=e.nsRouter||function(){var a;return a=function(){var b,c;return b=i(arguments),c=a.ns[b.nsName],b.rest.length?c?c.apply(c,b.rest):void a.q.push(arguments):c},a.ns={},a.q=[],a.defineNamespace=function(b,c){var e,f,h,i,j,k;if(h=b||d,a.ns[h])return a.ns[h];for(j=a.ns[h]=c(b),g.extend(j,{nsName:h,isDefault:h===d,path:"Krux.ns."+h}),a.creator=a.creator||j,k=a.q.splice(0,a.q.length),f=0,i=k.length;i>f;f++)e=k[f],a.apply(null,e);return j},a.nsRouter=a,g.extend(a,e),window.Krux=a}(),b.init=function(a,c){var d;return d=b.self=b.router.defineNamespace(a,c),d&&(b.name=d.nsName,b.isDefault=d.isDefault,b.path=d.path,h(d)),d}});var f={}.hasOwnProperty;a("pixel",function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;e=a("underscore"),z=a("util"),m=a("events"),r=a("http"),j=a("config"),l=a("dom"),k=a("data"),n=a("feature"),w=a("sniff"),x=a("store"),s=a("privacy"),d=window.Krux,i=j.init(),u=b.sendImpl=function(a){var b,c,d,e,g;c={};for(b in a)f.call(a,b)&&(g=a[b],(g=o(b,g))&&(c[b]=g));e=k.get("config_param_control_tag_pixel_throttle"),d=100*Math.random(),e&&d>e||(r.pixel({url:k.get("url_pixel"),data:c}),setTimeout(function(){var a;return(null!=(a=k.get("user"))?a.length:void 0)>0?void 0:s.fetch()},500))},y=b.stringifyValue=function(a){var b;return null==a&&(a=""),e.isArray(a)?function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],null!=b&&e.push(y(b));return e}().join(h):String(a)},p=b.formatters=[],g=b.addFormatter=function(a,b){p.push({test:a,formatter:b})},o=b.format=function(a,b){var c,d,e,f,g,h;for(e=void 0,g=0,h=p.length;h>g;g++)if(d=p[g],("function"==typeof(c=d.test).test?c.test(a):void 0)||d.test===a){e=d;break}return(f=(null!=e?e.formatter:void 0)||y)(b)},b.tuppleSeparator=":",h=b.arraySeparator=",",t=b.send=function(a,b){var c;c=q(a,b),u(c),m.fireOnce("pixel",{phase:a,data:c})},q=b.gather=function(b,c){var h,j,l,o,p,q,r,s,t,u,v,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;E={source:"smarttag",fired:b,confid:k.get("confid"),_kpid:k.get("pubid"),_kcp_s:k.get("site"),_kcp_sc:k.get("section"),_kcp_ssc:k.get("subsection"),_kcp_d:k.get("domain"),_knifr:window.frames.length,_kpref_:window.document.referrer},c===!1&&(E.pageview=String(c)),1!==k.get("pixel_data__knopii")&&(E._kua_kx_tz=(new Date).getTimezoneOffset(),E.geo_country=k.get("user_attr_kx_geo_country"),E.geo_region=k.get("user_attr_kx_geo_region"),E.geo_city=k.get("user_attr_kx_geo_city"),E.geo_dma=k.get("user_attr_kx_geo_dma")),e.size(k.get("config_segments"))&&(E.rtsegs=a("segments").realtime()),V=function(a,b){var c,d;for(c in b)f.call(b,c)&&(d=b[c],E[a+c]=d)},V("_kua_",k.user_attr()),V("_kpa_",k.page_attr()),V("",k.namespace("pixel_data")()),B=null!=(H=window.performance)?H.navigation:void 0,Q=null!=(I=window.performance)?I.timing:void 0,!B||!Q||w.ff&&w.version<9||(o=function(a,b){var c;return null==b&&(b=void 0),null==b&&(b=a+"End",a+="Start"),c=Q[a]&&Q[b]&&Q[b]-Q[a],null==c||0>c||c>3e4?-1:c},e.extend(E,{t_navigation_type:B.type,t_dns:o("domainLookup"),t_tcp:o("connect"),t_http_request:o("request"),t_http_response:o("response"),t_content_ready:o("navigationStart","domInteractive"),t_window_load:o("navigationStart","loadEventStart"),t_redirect:o("redirect")})),O=a("scrape"),S=m.happened("user_data_response"),C=a("ns"),t=C.isDefault?d:d[C.name]||{},e.extend(E,{interchange_ran:t.hasOwnProperty("user"),store_user:t.user,store_segs:t.segments,dart_user:O.dart("u"),dart_segs:O.dart("ksgmnt")||O.dart("ksg"),userdata_was_requested:!!m.happened("user_data_request"),userdata_did_respond:!!S,store_user_after:x.get("user"),store_segs_after:x.get("segs")}),A=window.location.href.split("#")[0],l=O.link_rel("canonical")||O.opengraph("url")||A,A!==l&&(E._kurl_=l),S&&e.extend(E,{userdata_user:[S.kuid,S.kuid_long],userdata_segs:[].concat(function(){var a,b;a=S.segments,b=[];for(j in a)f.call(a,j)&&(U=a[j],b.push(U));return b}())}),D=x.get("org_user_id"),null!=D&&""!==D?e.extend(E,{_kuid:D}):i.get("params.target_fingerprint",!1)&&!n.hasThirdPartyCookies()&&e.extend(E,{_kuid:k.get("fp_id")}),i.get("params.no_pii",!1)?e.extend(E,{browser_bucket:w.browser,browser_version:w.version}):i.get("params.fingerprint",!1)&&(r=k.get("fp"),s=k.get("fp_id"),e.extend(E,{kfuid:s,kxfp:r})),J={user:"_kua_",page:"_kpa_"};for(R in J){F=J[R],K=k[R+"_attr"]();for(y in K)T=K[y],E[F+y]=T}try{N=window.sessionStorage}catch(q){p=q,N=null}if(N)try{E.sview=N.krux_views=+(N.krux_views||0)+1}catch(W){}for(L=k.get("tags"),u=v=0,z=L.length;z>v;u=++v)P=L[u],(null!=(M=P.time)?M.end:void 0)&&(E["kplt"+u]=P.id,V("tag"+P.id+"_timing",{duration:P.time.duration}));return g(/tag.*_timing/i,function(){return!1}),h=a("http-jsonp").Request.all,E.jsonp_requests=function(){var a,b,c;for(c=[],a=0,b=h.length;b>a;a++)G=h[a],c.push([G.url,G.time.end-G.time.start]);return c}(),E},v=b.sendOnce=z.once(t),b.init=function(){m.onOnce("report",function(){var a;a=e.partial(v,"report"),m.happened("user_data_fetch_scheduled")?(m.onOnce("user_data_response",function(){z.defer(a)}),window.setTimeout(function(){v("user_data_timeout")},300)):a()}),m.onOnce("dom:beforeunload",function(){v("dom:beforeunload")}),m.onOnce("dom:unload",function(){v("dom:unload")}),m.on("navigation",function(a){var b;b={source:"smarttag",type:"navigation",_kpid:k.get("pubid"),_kcp_s:k.get("site"),_kcp_sc:a.section,_kcp_ssc:a.subsection},u(b)}),a("test").module("pixel",function(a){a("pixel",m.happened("pixel"))})}}),a("privacy",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;h=a("underscore"),B=a("util"),i=a("config"),l=a("feature"),o=a("http"),v=a("routes"),w=a("sniff"),x=a("store"),A=a("timing"),k=a("events"),j=a("data"),m=a("krux-uid").fromShort,d="optout:",b.USER_ID_TTL=g=6*A.MONTHS,b.Events=e={ATTEMPT_CHANGE:d+"attemptChange",CHANGE:d+"change",ERROR:d+"error",REQUEST:d+"request",RESPONSE:d+"response",USER_UPDATE:"user:update"},f=b.OPTOUT_ALLOWED_KEYS=[/^tag\d*\.day$/,"optout"],b.Events=h.clone(e),r=function(a){return h.extend({code:"success",type:"no_change",time:new Date},a)},t=!1,n=function(a){k.fire(e.REQUEST),o.jsonp({callback:"kxjsonp_optOutCheck",done:a,fail:h.partial(k.fire,e.ERROR),url:i.init().get("services.is_optout")})},b.fetch=function(a){return null==a&&(a=B.noop),n(function(c){return b.handler(c),a(c)})},u=function(a){var b;k.fire(e.ATTEMPT_CHANGE),b=h.partial(k.fire,e.CHANGE),l.hasThirdPartyCookies()?o.jsonp({callback:"kxjsonp_optOutChange",done:b,fail:h.partial(k.fire,e.ERROR),url:i.init().get("services.set_opt"+(a?"out":"in"))}):b(r({type:"optout_change"}))},s=b.optOut=function(a,b){null==a&&(a=!0),null==b&&(b=!1),a?(q()||u(a),x.allowOnly.apply(x,f),x.clear(),b&&!l.hasThirdPartyCookies()||x.set("optout","true")):(q()&&u(a),x.allowAll(),x.remove("optout")),t=a,i.init().set("dnt",t)},z=function(){return"true"===("function"==typeof x.get?x.get("optout"):void 0)},p=b.isDnt=function(){var a;return w.ie&&w.version>=10?!1:(a=B.deref("doNotTrack"),null==a&&(a=B.deref("navigator.doNotTrack")),/(?:yes|1)/i.test(a))},q=b.isOptOut=function(){return Boolean(t||i.init().get("dnt",!1)||z()||p())},b.storeKuid=y=function(a){var b,c;null==a&&(a=j.get("user")||("function"==typeof x.get?x.get("kuid"):void 0)),c="function"==typeof x.get?x.get("org_user_id"):void 0,t||null==a&&!c||(j.set("user",c||a),b=function(){switch(!1){case""===c:return c;case!i.init().get("params.dfp_premium",!1):return m(a).toLongId();default:return a}}(),"function"==typeof x.set&&x.set("user",b,g),"function"==typeof x.set&&x.set("kuid",a,g),k.fire(e.USER_UPDATE,{kuid:b,"short":a,"long":m(a).toLongId()}))},b.handler=function(a){var b;k.fire(e.RESPONSE,a),b=a._kuid_||a.kuid,a.optout||/^(?:OPTOUT|DNT)$/i.test(a._kuid_||"")?s():null!=a&&null==(null!=a?a.optout:void 0)&&null==b||s(!1),y(b)},b.init=function(){var a;k.onOnce("dom:load",function(){return n(b.handler)}),a=function(){p()?s(!0,!0):q()&&s(),k.off(x.READY_EVENT,a)},k.onOnce(x.READY_EVENT,a),v.simple("optout",function(a,b){var c,d,f;return null==b&&(b=B.noop),null==a?q():a===q()?void b(null,r()):(d=function(){k.off(e.CHANGE,f),k.off(e.ERROR,c)},f=function(a){return b(null,a),d()},c=function(a){return b(new Error(a.message),a),d()},k.on(e.CHANGE,f),k.on(e.ERROR,c),void s(a))})}});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("proxy/broker",function(a,b,c){var e,f,g;return g=a("x-frame"),f=a("json"),c.exports=e=function(){function a(a,b,c){this.window=a,this.targetDomain=b,null==c&&(c=!0),this._runQueue=d(this._runQueue,this),this._listen=d(this._listen,this),this.stop=d(this.stop,this),this.publish=d(this.publish,this),this.subscribe=d(this.subscribe,this),this.run=d(this.run,this),this.topics={},this.acked=!c,this.queue=[],this.handle=null}return a.prototype.run=function(){return null==this.handle,null==this.handle&&(this.handle=g.listen(this._listen,{strict:!1})),this},a.prototype.subscribe=function(a,b){var c,d,e;return e=null!=(c=this.topics)[a]?c[a]:c[a]=[],d=e.push(b)-1,{remove:function(){e.splice(d,1)}}},a.prototype.publish=function(a,b){var c;return c={topic:a,message:b},this.acked?g.send(this.window,c,this.targetDomain):this.queue.push(c),this},a.prototype.stop=function(){var a;return null!=(a=this.handle)&&a.remove(),this},a.prototype._listen=function(a){var b,c,d,e,f,g,h;if(f=a.data,h=f.topic,e=f.message,null!=h&&h in this.topics)for("ack"===e&&(this.acked=!0,this._runQueue()),g=this.topics[h],c=0,d=g.length;d>c;c++)(b=g[c])(h,e)},a.prototype._runQueue=function(){var a,b,c,d,e,f;for(f=this.queue,this.queue=[],a=0,b=f.length;b>a;a++)d=f[a],e=d.topic,c=d.message,this.publish(e,c);return this},a}()});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("proxy/client",function(a,b,c){var e,f,g;return f=a("util"),g=a("uuid"),c.exports=e=function(){function a(a,b){this.uid=a,this.broker=b,this._handleSuccess=d(this._handleSuccess,this),this._publish=d(this._publish,this),this.remove=d(this.remove,this),this.count=d(this.count,this),this.clear=d(this.clear,this),this.set=d(this.set,this),this.get=d(this.get,this),this.stop=d(this.stop,this),this.run=d(this.run,this),this.inFlight={}}return a.prototype.run=function(){return this.broker.run(),this.handle=this.broker.subscribe(this.uid,this._handleSuccess),this},a.prototype.stop=function(){var a;return null!=(a=this.handle)&&a.remove(),this},a.prototype.get=function(a,b){return this._publish({action:"get",key:a},b)},a.prototype.set=function(a,b,c){return this._publish({action:"set",key:a,value:b},c)},a.prototype.clear=function(a){return this._publish({action:"clear"},a)},a.prototype.count=function(a,b,c){return this._publish({action:"count",key:a,delta:b},c)},a.prototype.remove=function(a,b){return this._publish({action:"remove",key:a},b)},a.prototype._publish=function(a,b){var c;return null==b&&(b=f.noop),c=g(),a.uid=c,this.broker.publish(this.uid,a),this.inFlight[c]=b,this},a.prototype._handleSuccess=function(a,b){var c,d;d=b.uid,"function"==typeof(c=this.inFlight)[d]&&c[d](a,b),delete this.inFlight[d]},a}()});var d=function(a,b){return function(){return a.apply(b,arguments)}},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a("proxy/cookie-cutter",function(a,b,c){var e,f;return f=a("timing"),c.exports=e=function(){function a(a){this.store=a,this._trim=d(this._trim,this),this.isOverSize=d(this.isOverSize,this),this.run=d(this.run,this)}var b,c,e;return c=["_kuid_"],e=1e3*f.MINUTES,b=1e3,a.prototype.run=function(){return this._trim(),this.handle=setInterval(this._trim,e),this},a.prototype.stop=function(){return clearInterval(this.handle),this},a.prototype.isOverSize=function(){return this.store.size()>b},a.prototype._trim=function(){try{this.isOverSize()&&this.store.until(function(a){return function(b,d){return g.call(c,d)>=0?!1:(a.store.remove(d,{domain:".krxd.net"}),!a.isOverSize())}}(this))}catch(a){}},a}()}),a("proxy/deliver",function(a,b,c){var d,e,f,g,h,i;d=a("underscore"),f=a("config"),h=a("events"),g=!1,e=[],i=b.id=function(){return"kx-proxy-"+f.init().get("confid")},b.init=function(b,c){var d,f,j,k,l,m,n,o;if(n=a("dom"),d=n.IFrame,f=n.byId,e.push(c),m=f(i()),null!=m||g){if(null!=m){for(k=0,l=e.length;l>k;k++)(j=e[k])(null!=(o=m.contentWindow)?o:m);e=[]}}else g=!0,h.onOnce("dom:ready",function(){return new d({onload:function(){var a,b,c,d,g;for(d=f(i()),b=0,c=e.length;c>b;b++)(a=e[b])(null!=(g=d.contentWindow)?g:d);return e=[]},attr:{id:i(),src:b,style:"display: none; visibility: hidden; height: 0; width: 0;"}})})},b.getNode=function(){return a("dom").byId(i())}}),a("proxy/href",function(a,b,c){var d,e,f,g,h,i,j,k,l;return d=a("underscore"),j=a("util"),e=a("config"),a("underscore").templateSettings={evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{%-([\s\S]+?)%\}/g},h=window.location,i="http:"===h.protocol?"http:":"https:",f=function(a){return a.replace(/(\/\/[^\/]*)\/.*$/,"$1")},g=function(a){return a.replace(/\/*$/,"")},l=function(a){return 0===a.indexOf("http")?a:""+i+a},k=function(a,b){return"="===b.slice(-1)?""+b+a:d.template(b,{confid:a})},c.exports=function(){var a,b,c,d,m,n;return a=e.init(),b=a.get("confid",""),c=k(b,g(l(a.get("services.config","//cdn.krxd.net/controltag/{{ confid }}.js")))),n=g(l(a.get("services.proxy","//cdn.krxd.net/partnerjs/xdi"))),m=i+"//"+h.hostname+(""===h.port?"":":"+h.port),d="proxy.22cee1c45b60e655c919130597160647.html",{childTarget:decodeURIComponent(j.param("target")||""),parentTarget:f(n),iframe:n+"/"+d+"#!kxsrc="+encodeURIComponent(c)+"&kxtarget="+encodeURIComponent(m)}}}),a("proxy",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;k=a("config"),o=a("feature"),q=a("store"),l=a("proxy/deliver"),p=a("proxy/href"),d=a("proxy/broker"),e=a("proxy/client"),f=a("proxy/cookie-cutter"),g=a("proxy/remote-store"),h=a("proxy/server"),i=null,j=[],m=!1,n=function(a){var b,c,d,e;for(c=j,j=[],d=0,e=c.length;e>d;d++)(b=c[d])(null,a)},b.client=function(a){var b,c,f,g,h;if(!o.hasLocalStorage()||!o.hasThirdPartyCookies())return void a(new Error("localStorage not usable"),i);if(j.push(a),h=p(),f=h.iframe,g=h.parentTarget,null!=i)n(i);else{if(m)return;if(null!=g){m=!0;try{l.init(f,function(a){return m=!1,n(i=new e(k.init().get("publisher.uuid"),new d(a,g,!0)).run())})}catch(c){b=c,a(b,i)}}else a(new Error("[proxy/index] unable to configure client, unusable proxyTarget found in proxy/href"))}},b.server=function(a){var b,c,e;q.init(),q.prefix="",c=k.init(a),c.set(""),e=c.get("publisher.uuid"),b=new d(window.parent,p().childTarget,!1),new h(e,b,new g(e,q)).run(),new f(q.cookie).run(),setTimeout(function(){return b.publish(e,"ack")},10)}});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("proxy/remote-store",function(a,b,c){var e,f,g,h,i,j,k;return k=a("util"),f=a("dom"),g=a("json"),h=a("sha1"),i=a("store"),j=a("timing"),c.exports=e=function(){function a(a,b,c){var e;this.key=a,this.store=b,this.cookies=null!=c?c:!1,this._read=d(this._read,this),this._persist=d(this._persist,this),this._listen=d(this._listen,this),this.set=d(this.set,this),this.remove=d(this.remove,this),this.count=d(this.count,this),this.clear=d(this.clear,this),this.get=d(this.get,this),this.run=d(this.run,this),this.checksum="",this.cache=null!=(e=this._read())?e:{}}var b;return b=3*j.DAYS,a.prototype.run=function(){return this.cookies||f.d2on(window,"storage",this._listen),this},a.prototype.get=function(a){var b;return null!=(b=this.cache[a])?b:""},a.prototype.clear=function(){return this.cache={},this._persist()},a.prototype.count=function(a,b){var c;return null==b&&(b=1),c=Number(this.get(a)),(null==c||k.isNaN(c))&&(c=0),this.set(a,c+b),this.get(a)},a.prototype.remove=function(a){return delete this.cache[a],this._persist()},a.prototype.set=function(a,b){return this.cache[a]=String(b),this._persist()},a.prototype._listen=function(a){var b;b=a.key,b===this.key&&this.checksum!==h.hash(this.store.get(this.key))&&(this.cache=this._read())},a.prototype._persist=function(){return this.store.set(this.key,g.stringify(this.cache),b),this},a.prototype._read=function(){var a;return a=this.store.get(this.key),this.checksum=h.hash(a),g.parse(a)},a}()});var d=function(a,b){return function(){return a.apply(b,arguments)}},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a("proxy/server",function(a,b,c){var e;return c.exports=e=function(){function a(a,b,c){this.uid=a,this.broker=b,this.store=c,this._handleMessage=d(this._handleMessage,this),this.set=d(this.set,this),this.remove=d(this.remove,this),this.get=d(this.get,this),this.count=d(this.count,this),this.clear=d(this.clear,this),this.stop=d(this.stop,this),this.run=d(this.run,this)}var b;return b=["clear","count","get","remove","set"],a.prototype.run=function(){return this.store.run(),this.broker.run(),this.handle=this.broker.subscribe(this.uid,this._handleMessage),this},a.prototype.stop=function(){return this.handle.remove(),this},a.prototype.clear=function(){this.store.clear()},a.prototype.count=function(a){var b,c;return c=a.key,b=a.delta,this.store.count(c,b)},a.prototype.get=function(a){var b;return b=a.key,this.store.get(b)},a.prototype.remove=function(a){var b;b=a.key,this.store.remove(b)},a.prototype.set=function(a){var b,c;b=a.key,c=a.value,this.store.set(b,c)},a.prototype._handleMessage=function(a,c){var d,e,f,h;d=c.action,h=c.uid,g.call(b,d)>=0&&(f=this[d](c),e={uid:h},null!=f&&(e.value=f),this.broker.publish(a,e))},a}()}),a("publisher",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;d=a("underscore"),p=a("util"),e=a("config"),g=a("feature"),h=a("fingerprint"),j=a("privacy"),k=a("proxy"),l=a("data-rewrite").tag,m=a("store"),n=a("timing"),o=a("krux-uid"),f=a("events"),i=a("geo"),b.init=function(b,c){var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;if(n.start(),r=e.init(c),w=a("dom"),a("jslog"),v=a("data"),a("whistle").init(function(a){return v.user_attr.set("kx_whistle",Number(a))}),C=a("routes"),a("scrape"),s=r.get("confid"),v.set("confid",s),v.set("domain",w.baseDomain(window.location.host)),v.set("schema_version",r.get("app.schema_version")),v.set("site",v.get("site")||r.get("site.name")||v.get("domain")),v.set("siteid",v.get("siteid")||r.get("site.id")),v.set("pubid",v.get("pubid")||r.get("publisher.uuid")),
r.get("params.no_pii")&&(v.set("pixel_data__knopii",1),v.user_attr("kx_lang",null),v.user_attr("kx_tech_browser_language",null)),a("pixel").init(),a("test").init(),a("test-visualtags").init(),v.set("tags",r.get("tags")),v.set("url",window.location.href),v.set("config",r.toJSON()),v.set("version_bucket",r.get("params.control_tag_version")),v.set("max_segments",r.get("params.max_segments")),v.set("prioritized_segments",r.get("prioritized_segments")),v.namespace("url",r.get("services")),v.namespace("config_param",r.get("params")),m.init(),j.init(),i.init(),w.safeMode())return console,f.onOnce("dom:load",p.bind(f.fireOnce,null,"report")),void n.end();if(k.client(function(a,b){if(null==a)try{return b.set("last_run",d.now())}catch(c){}}),r.get("params.fingerprint")&&!j.isOptOut()&&h.init(m),z=null,t=r.get("params.user_id_cookie",null),null!=t)for(B=t.split(","),x=0,y=B.length;y>x;x++)A=B[x],null==z&&(u=m.cookie.get(A,null),(null!=u?u.length:void 0)>0&&(z=A+"_"+u));F=g.hasThirdPartyCookies(),null==z||F?m.remove("org_user_id"):(m.set("org_user_id",z),v.set("user",z)),null==z&&r.get("params.first_party_uid")&&!F&&(G=m.get("kuid")||o().toShortId(),v.set("user",G),j.storeKuid()),E=function(){var a,b,c,d;for(c=v.get("tags")||[],d=[],a=0,b=c.length;b>a;a++)D=c[a],d.push(l(D));return d}(),v.set("tags",E),v.set("config_segments",r.get("realtime_segments")),f.onOnceAll("dom:load tag:all_done whistle",function(){f.fireOnce("report")}),q=a("adm-events"),q.parseConfig(r.get("realtime_segments",[])),q.check3rdParty(),a("segments"),a("stats"),a("social"),C.api(),r.get("context_terms")&&f.onOnce("dom:load",function(){a("context-terms").process(r.get("context_terms"))}),a("tag").init(),r.get("params.recommend")&&a("recommend"),n.end()}});var d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;a("recommend",function(a,b,c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka;x=a("underscore"),ia=a("util"),I=a("dom"),fa=a("store"),E=a("config"),_=a("routes"),Q=a("hogan.js"),da=a("sizzle"),ca=a("sha1"),R=a("http"),U=a("json"),ja=a("uuid"),L=a("geo"),ga=a("tag-delivery"),G=a("data"),ha=a("timing"),D=E.init(),r=window.location.protocol+"//",l=window.location.host,q=window.location.pathname,u=7*ha.DAYS,t=5e3,o="1.0",g="rec",j="recfc",n=100,s=5,h=r+"apiservices.krxd.net/click_tracker/track",H={test:0,links:5,template:null,freqcap:10,domains:l,filter:"",fields:"",algorithms:[],objectives:{},tracking:{},shuffle:!0,ranking:"sort",content_type:"",click_event:"",impression_event:"",ads:0,postprocess:null},X=G.get("pubid"),aa=fa.get("allsegs"),F=""+r+l+q,W=x.now(),A={},k=function(){function a(a){var b;this.cap=a,this.table=function(){var a;try{return U.parse(fa.get(j,{}))}catch(a){return b=a,{}}}()}return a.prototype.get=function(a){return a in this.table?this.table[a]:[0,0]},a.prototype.increment=function(a,b){this.table[a]=[b+1,W]},a.prototype.save=function(){var a,b,c,d,e,f,g;if(d=x.keys(this.table),d.length>n)for(a=function(){var a,b,d;a=this.table,d=[];for(c in a)b=a[c],x=b[0],g=b[1],d.push([c,g]);return d}.call(this),a.sort(function(a,b){return a[1]>b[1]?-1:a[1]<b[1]?1:0}),a=a.slice(0,+(d.length-n)+1||9e9),b=0,e=a.length;e>b;b++)f=a[b],c=f[0],x=f[1],delete this.table[c];fa.set(j,U.stringify(this.table))},a}(),p=function(){function a(a,b){this.cap=a,this.table=null!=b?b:{}}return a.prototype.get=function(a){return[0,0]},a.prototype.increment=function(a,b){},a.prototype.save=function(){},a}(),k.create=function(a){return a>0?new k(a):new p(a)},y=function(a){return A[a.name]=a},K=function(a){var b,c,d,e,f;for(e=a.algorithms,f=[],b=0,d=e.length;d>b;b++)c=e[b],A[c].enabled&&f.push(A[c]);return f},J=function(){return{entry:[]}},ba=function(a){return G.get("url_contentConnector")+a},B=function(a){var b,c;if(null==a)throw new Error("Content connector requires a template");if(c=I.byId(a),null==c)throw new Error("Could not find content connector template for '"+a+"'.");if(b=I.text(c),null==b)throw new Error("Could not get content connector template for '"+a+"'.");return Q.compile(b)},N=function(a,b){var c,d,e,f;e=ia.urlParams(a),a=a.split("?")[0];for(c in b)f=b[c],e[c]=f;return d=ia.paramString(e),d.length>0?a+"?"+d:a},C=function(a,b){var c,d,e,f,g,h,i,j,l,m,n,o,p,q,r;for(o=b.algorithms,g=0,l=o.length;l>g;g++)i=o[g],i in a||(a[i]=A[i].defaultValue());for(f=k.create(b.freqcap),d={},q=(p=[]).concat.apply(p,function(){var c,d,e,f;for(e=b.algorithms,f=[],c=0,d=e.length;d>c;c++)i=e[c],f.push(a[i].entry);return f}()),h=0,m=q.length;m>h;h++)e=q[h],e.hash=ca.hash(e.url),e.hash in d?d[e.hash].rank+=1:(e.rank=1,r=f.get(e.hash),e.count=r[0],e.lastShown=r[1],d[e.hash]=e);switch(d=function(){var a;a=[];for(c in d)e=d[c],e.url!==F&&(b.freqcap<1||e.count<=b.freqcap)&&a.push(e);return a}(),b.ranking){case"sort":d.sort(function(a,b){return a.rank>b.rank?-1:a.rank<b.rank?1:0});break;case"shuffle":ia.shuffle(d)}if(d=d.slice(0,+(b.links-1)+1||9e9),b.shuffle&&ia.shuffle(d),b.freqcap>0){for(j=0,n=d.length;n>j;j++)e=d[j],f.increment(e.hash,e.count+1);f.save()}return{entry:d}},M=function(a){var b;return(b=/^(before|after|inside|replace):(.+)$/.exec(a))?[b[1],b[2]]:["inside",a]},S=function(a,b,c){var d;switch(a){case"inside":b.innerHTML=c;break;default:switch(d=window.document.createElement("div"),d.innerHTML=c,a){case"before":I.before(b,d);break;case"after":I.after(b,d);break;default:I.replace(b,d)}}},$=function(a,b){var c,d,e,f,g,i,j,k,l,m,n;for(b.tracking.kx_cc=1,b.click_event&&(b.tracking.kx_event_uid=b.click_event),b.tracking.kx_event_lnk=ja(),b.tracking.kx_tz=(new Date).getTimezoneOffset(),b.tracking.kx_co=L.get("country"),b.tracking.kx_st=L.get("region"),b.tracking.kx_met=L.get("dma"),b.tracking.kx_pcode=L.get("zip"),b.tracking.kx_seg=aa,b.tracking.kx_site_id=G.get("siteid"),b.tracking.kx_tag_id=null!=(j=ga.getTagContext("tag"))?j.id:void 0,c={},k=a.entry,e=f=0,i=k.length;i>f;e=++f)d=k[e],c["url"+(e+1)]=d.url,b.tracking.clk=d.url,b.tracking.kx_pub_id=X,d.url=N(h,b.tracking),delete b.tracking.clk,delete b.tracking.kx_pub_id,null!=b.postprocess&&b.postprocess(d);if(I.addStylesheet(b.stylesheet),l=B(b.template).render(a),m=da.find(b.selector)[0],null==m)throw new Error("Could not find target element for '"+b.selector+"'");if(S(b.insertionPoint,m,l),b.impression_event){for(g in c)n=c[g],b.tracking[g]=n;delete b.tracking.kx_event_uid,b.tracking.event_type="ccvw",_.call("admEvent",b.impression_event,b.tracking)}},O=function(a,b,c,d){var e,f,g,h,i,j;for(f in a)j=a[f],f in b||(b[f]=j);for(h=d.algorithms,e=0,g=h.length;g>e;e++)if(f=h[e],!(f in b))return;null!=c&&window.clearTimeout(c),i=C(b,d),i.entry.length>0&&$(i,d)},P=function(a,b){var c,d,e,f,g;for(f={},g=b.algorithms,c=0,e=g.length;e>c;c++)d=g[c],d in a||(f[d]=A[d].defaultValue());return O(f,a,null,b)},ea=function(a,b){return window.setTimeout(function(){return P(a,b)},t)},ka=function(a,b){var c,d,e,f,g;if(!(1<=(e=b.links)&&10>=e))throw new Error("Content connector links must be between 1 and 10");if(null==b.template||""===b.template)throw new Error("Content connector requires a template to be specified in options");for(d in H)g=H[d],d in b||(b[d]=g);for(d in b)g=b[d],x.isArray(g)&&(b[d]=g.join(","));return x.isObject(b.objectives)&&(b.objectives=ia.paramString(b.objectives,";",",",String)),x.isString(b.tracking)&&(b.tracking=ia.parseParams(b.tracking)),b.algorithms=function(){var a,c,e,f,g;for(e=b.algorithms.split(","),g=[],a=0,c=e.length;c>a;a++)d=e[a],(null!=(f=A[d])?f.enabled:void 0)&&g.push(d);return g}(),0===b.algorithms.length&&(b.algorithms=function(){var a;a=[];for(d in A)c=A[d],c.enabled&&a.push(d);return a}()),f=M(a||b.selector),b.insertionPoint=f[0],b.selector=f[1],b},f=function(){function a(a,b){this.name=a,this.enabled=null!=b?b:!0,this.fetch=d(this.fetch,this)}return a.prototype.defaultValue=function(){return J()},a.prototype.execute=function(a,b,c){},a.prototype.afterLoad=function(a){},a.prototype.fetch=function(a,b,c,d){var e;e=function(d){return function(){var e;return e={},e[d.name]=d.defaultValue(),O(e,a,b,c)}}(this),this.enabled?R.jsonp({url:ba(this.name),callback:"kxjsonp_contentConnector"+this.name,data:d,done:function(d){return function(f){var g;return f.entry.length>0?(d.afterLoad(f),g={},g[d.name]=f,O(g,a,b,c)):e()}}(this),fail:e}):e()},a}(),w=function(a){function b(){this.execute=d(this.execute,this),b.__super__.constructor.call(this,"user")}return e(b,a),b.prototype.defaultValue=function(){var a,b;return b=function(){var b;try{return U.parse(fa.get(g,null),J())}catch(b){return a=b,null}}()},b.prototype.afterLoad=function(a){fa.set(g,U.stringify(a),u)},b.prototype.execute=function(a,b,c){this.fetch(a,b,c,{pubid:X,lang:window.navigator.language,filter:c.filter,ct:c.content_type,dom:c.domains,fields:c.fields,obj:c.objectives,seg:aa,nv:o,ni:c.links*s})},b}(f),m=function(a){function b(){this.execute=d(this.execute,this),b.__super__.constructor.call(this,"item")}return e(b,a),b.prototype.execute=function(a,b,c){this.fetch(a,b,c,{pubid:X,lang:window.navigator.language,filter:c.filter,ct:c.content_type,dom:c.domains,fields:c.fields,obj:c.objectives,url:F,nv:o,ni:c.links*s})},b}(f),i=function(a){function b(){this.execute=d(this.execute,this),b.__super__.constructor.call(this,"content")}return e(b,a),b.prototype.execute=function(a,b,c){this.fetch(a,b,c,{pubid:X,lang:window.navigator.language,filter:c.filter,ct:c.content_type,dom:c.domains,fields:c.fields,obj:c.objectives,url:F,nv:o,ni:c.links*s})},b}(f),v=function(b){function c(){this.execute=d(this.execute,this),c.__super__.constructor.call(this,"ad",H.ads>0),this.enabled&&(this.flashVersion=a("flash").version())}return e(c,b),c.prototype.execute=function(a,b,c){this.fetch(a,b,c,{allimps:1,test:c.test,pubid:X,site_id:G.get("siteid"),url:F,cat:c.cat,search:c.search,utc:(new Date).getTimezoneOffset(),lang:window.navigator.language,fv:this.flashVersion.major+"."+this.flashVersion.minor,h:window.screen.height,w:window.screen.width,co:L.get("country"),st:L.get("region"),met:L.get("dma"),pcode:L.get("zip"),seg:aa,nv:o,ni:c.ads,filter:c.filter,ct:c.content_type,dom:c.domains,fields:c.fields})},c}(f),Y=function(a,b){var c,d,e,f,g,h;if(null==b&&(b={}),!D.get("params.recommend"))throw new Error("Content connector is not enabled for this account");for(b=x.isString(a)?ka(a,b):ka(null,a),d={},h=ea(d,b),g=K(b),e=0,f=g.length;f>e;e++)c=g[e],c.execute(d,h,b)},Z=[new w,new m,new i,new v];for(T=0,V=Z.length;V>T;T++)z=Z[T],y(z);return _.simple("recommend",Y),c.exports={recommend:Y,algorithms:A,FrequencyTable:k,addAlgorithm:y,enabledAlgorithms:K,emptyResponse:J,serviceUrl:ba,compileTemplate:B,getUrlWithTracking:N,computeFinalRecommendations:C,getInsertionPointAndSelector:M,insertRenderedContent:S,renderResponse:$,handleResponse:O,handleTimeout:P,validateOptions:ka,Algorithm:f,UserAlgorithm:w,ItemAlgorithm:m,ContentAlgorithm:i,SponsoredAlgorithm:v}}),a("require-shim",function(a,b,c){return c.exports=function(b){switch(b){case"data":return a("data");case"dom":return a("dom");case"events":return a("events");case"feature":return a("feature");case"http":return a("http");case"json":return a("json");case"marketer":return a("marketer");case"ns":return a("ns");case"pixel":return a("pixel");case"routes":return a("routes");case"scrape":return a("scrape");case"segments":return a("segments");case"sha1":return a("sha1");case"sizzle":return a("sizzle");case"sniff":return a("sniff");case"store":return a("store");case"tag":return a("tag");case"test":return a("test");case"underscore":return a("underscore");case"util":return a("util");default:return}}}),a("rollout",function(a,b,c){var d,e,f,g;return g=a("util"),f=a("timing"),e=a("store"),d="ro_",c.exports=function(a,b,c){var h,i,j,k;return null==b&&(b=.001),null==c&&(c=6*f.MONTHS),h=""+d+a,j=g.param(a),i=null!=j?/1|true/.test(j):void 0,k=g.rate(b)||"1"===e.get(h,"0"),null!=i&&(k=i),k?e.set(h,"1",c):e.remove(h),k}}),a("routes",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;d=a("underscore"),r=a("util"),g=a("events"),j=a("ns"),i=a("json"),n=a("require-shim"),o=b.routes=[],k=b.q=window.Krux&&window.Krux.q||[],h=b.getHandler=function(a){var b,c,d;for(b=0,c=o.length;c>b;b++)if(d=o[b],d[0].test(a))return d},f=b.call=function(a){var b,c,e;return b=arguments,j.NS_RE.test(a)&&(c=j.router(a),null!=c)?d.size(b)>1?c.apply(c,d.tail(b)):c:d.isFunction(a)?a.call(null,n):(e=h(a))?e[1].apply(null,b):void k.push(d.toArray(b))},q=b.understands=function(a){return!!h(a)},m=b.replay=function(){var a,b,c,e;for(e=d.clone(k),k.length=0,b=0,c=e.length;c>b;b++)a=e[b],f.apply(null,a)},e=b.add=function(a,b){o.push([a,b]),m()},l=b.regexp=function(a,b){e(a,function(c){return b.apply(this,[c.match(a)].concat(d.rest(arguments)))})},p=b.simple=function(a,b){var c;c=new RegExp("^"+a+"$"),l(c,function(){return b.apply(null,d.rest(arguments))})},b.once=function(a,c){var d;d=function(){return o=b.routes=r.remove(o,d),c.apply(this,arguments)},p(a,d)},b.namespace=function(a,b){var c;c=new RegExp("^"+a+"\\.(.*)"),l(c,function(a){b[a[1]].apply(b,d.rest(arguments))})},b.api=function(){l(/^fire:(.+)/,function(a,b){return g.fire(a[1],b)}),l(/^on:(.+)/,function(a,b){return g.on(a[1],b)}),l(/^fireOnce:(.+)/,function(a,b){return g.fireOnce(a[1],b)}),l(/^onOnce:(.+)/,function(a,b){return g.onOnce(a[1],b)}),l(/^require:?(.*)/,function(a,b){return a[1]?n(a[1]):b?n(b):n}),p("JSON.stringify",i.stringify),p("log",r.log),p("page:load",function(b,c){var d,e,g,h,i,j;d=a("config").init(),h=a("http"),i=a("pixel"),j=a("segments");try{a("data").set("url",String(window.location)),f("tag:reload",function(a){return b&&b(a),i.send("ajax",null!=c?c.pageView:void 0),d.get("params.store_realtime_segments",!1)&&j.syncSegments(),h.clearRequestList()})}catch(g){e=g,b&&b(e)}})},p("understands",q)});var d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty,g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},c=[].slice;a("rules-network",function(a,b,f){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;return H=a("underscore"),I=a("expression"),J=function(a){return H.isString(a)?a.toLowerCase():a},K=function(a){var b;return b=I.parse(a),H.isArray(b)?b:[b]},v=function(){function a(){}return a.prototype.assert=function(){return!1},a.isMatch=function(){return!1},a}(),B=function(a){function b(a){this.id=a,this.assert=d(this.assert,this)}return e(b,a),b.prototype.assert=function(a){return a.add(this.id)},b}(v),h=function(a){function b(a,c,d){var e,f;this.id=a,this.operands=function(){var a,b,c;for(c=[],a=0,b=d.length;b>a;a++)e=d[a],c.push(J(e));return c}(),f=b.parseDelimiter(c),this.key=f[0],this.delimiter=f[1],this.productions=[]}return e(b,a),b.prototype.assert=function(a,b){var c,d,e,f,g,h;if(h=function(){switch(!1){case!H.isString(b):return b.split(this.delimiter);case!H.isArray(b):return b;case null==b:return[b];default:return[]}}.call(this),g=this._assert(a,function(){var a,c,d;for(d=[],a=0,c=h.length;c>a;a++)b=h[a],d.push(J(b));return d}()))for(a.assert(this.id),f=this.productions,c=0,d=f.length;d>c;c++)e=f[c],e.assert(a);return g},b.prototype._assert=function(){return!1},b.parseDelimiter=function(a){var b;return b=a.length,":"===a[b-2]?[a.slice(0,b-2),a[b-1]]:[a,","]},b}(v),r=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(a,b){var c,d,e;for(c=0,d=b.length;d>c;c++)if(e=b[c],g.call(this.operands,e)>=0)return!0;return!1},b.isMatch=function(a){return"intersects"===a},b}(h),y=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(){return!b.__super__._assert.apply(this,arguments)},b.isMatch=function(a){return"notIntersects"===a},b}(r),l=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.isMatch=function(a){return"contains"===a},b}(r),w=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(){return!b.__super__._assert.apply(this,arguments)},b.isMatch=function(a){return"notContains"===a},b}(l),E=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(a,b){var c,d,e,f;for(f=this.operands,c=0,d=f.length;d>c;c++)if(e=f[c],0===b.indexOf(e))return!0;return!1},b.isMatch=function(a){return"endsWith"===a},b}(h),m=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(a,b){var c,d,e,f;for(f=this.operands,c=0,d=f.length;d>c;c++)if(e=f[c],b.length===e.length+b.indexOf(e))return!0;return!1},b.isMatch=function(a){return"endsWith"===a},b}(h),u=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(a,b){var c,d,e,f,g,h,i;for(h=this.operands,c=0,e=h.length;e>c;c++)for(g=h[c],d=0,f=b.length;f>d;d++)if(i=b[d],null!=i&&"function"==typeof i.match?i.match(g):void 0)return!0;return!1},b.isMatch=function(a){return"matches"===a},b}(h),z=function(a){function b(){return this._assert=d(this._assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(){return!b.__super__._assert.apply(this,arguments)},b.isMatch=function(a){return"notMatches"===a},b}(u),o=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(a,b){var c,d,e;for(c=0,d=b.length;d>c;c++)if(e=b[c],e===!0)return!0;return!1},b.isMatch=function(a){return 0===("function"==typeof a.indexOf?a.indexOf("$event"):void 0)},b}(h),k=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._assert=function(a,b){var c,d,e,f,g,h,i;for(h=this.operands,c=0,e=h.length;e>c;c++)for(g=h[c],d=0,f=b.length;f>d;d++)if(i=b[d],this.compare(i,g))return!0;return!1},b.prototype.compare=function(){return!1},b.isMatch=function(){return!1},b}(h),t=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.compare=function(a,b){return b>a},b.isMatch=function(a){return"<"===a},b}(k),q=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.compare=function(a,b){return a>b},b.isMatch=function(a){return">"===a},b}(k),s=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.compare=function(a,b){return b>=a},b.isMatch=function(a){return"<="===a},b}(k),p=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.compare=function(a,b){return a>=b},b.isMatch=function(a){return">="===a},b}(k),n=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.compare=function(a,b){return a===b},b.isMatch=function(a){return"=="===a||"equals"===a},b}(k),x=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.compare=function(a,b){return a!==b},b.isMatch=function(a){return"!="===a||"notEquals"===a},b}(k),j=function(a){function b(){var a,b,d,e,f,h;for(b=arguments[0],f=2<=arguments.length?c.call(arguments,1):[],this.id=b,this.operands=f,this.productions=[],h=this.operands,a=0,d=h.length;d>a;a++)e=h[a],g.call(e.productions,this)<0&&e.productions.push(this)}return e(b,a),b.prototype.assert=function(){return!1},b}(v),F=function(a){function b(a){this.id=a,this.productions=[]}return e(b,a),b.prototype.assert=function(){return!1},b.isMatch=function(){return!0},b}(v),i=function(a){function b(){return this.assert=d(this.assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.assert=function(a){var b,c,d,e,f,g,h,i;for(h=this.operands,b=0,d=h.length;d>b;b++)if(f=h[b],1!==a.assertions[f.id])return!1;for(a.assert(this.id),i=this.productions,c=0,e=i.length;e>c;c++)g=i[c],g.assert(a);return!0},b.isMatch=function(a){return"and"===a},b}(j),A=function(a){function b(){return this.assert=d(this.assert,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype.assert=function(a){var b,c,d,e,f,g,h,i;for(h=this.operands,b=0,d=h.length;d>b;b++)if(f=h[b],1===a.assertions[f.id]){for(a.assert(this.id),i=this.productions,c=0,e=i.length;e>c;c++)g=i[c],g.assert(a);return!0}return!1},b.isMatch=function(a){return"or"===a},b}(j),G=function(){function a(a){this.ruleBase=a,this.set=d(this.set,this),this.assert=d(this.assert,this),this.results=d(this.results,this),this.add=d(this.add,this),this.assertions={},this.productions={}}return a.prototype.add=function(a){return this.productions[a]=1},a.prototype.results=function(){var a,b,c,d;b=this.productions,c=[];for(a in b)d=b[a],c.push(a);return c},a.prototype.assert=function(a){return this.assertions[a]=1},a.prototype.set=function(a,b){var c,d,e,f,g,h;if(c=this.ruleBase.alphaNodes,a in c){for(g=c[a],h=[],d=0,e=g.length;e>d;d++)f=g[d],h.push(f.assert(this,b));return h}},a}(),C=function(){function a(a){this.alphaNodes=a,this.open=d(this.open,this)}return a.prototype.open=function(){return new G(this)},a}(),D=function(){function a(){this.build=d(this.build,this),this.addNode=d(this.addNode,this),this.addBetaNode=d(this.addBetaNode,this),this.addAlphaNode=d(this.addAlphaNode,this),this.addRule=d(this.addRule,this)}return a.prototype.alphaTypes=[l,m,n,o,p,q,r,s,t,u,w,x,y,z,E],a.prototype.betaTypes=[i,A,F],a.prototype.alphaNodes={},a.prototype.nodes={},a.prototype.isAlphaNode=function(b){var c,d,e,f;for(e=a.prototype.alphaTypes,c=0,d=e.length;d>c;c++)if(f=e[c],f.isMatch(b))return!0;return!1},a.prototype.addRule=function(a){var b;return b=this.addNode(a.test),b.productions.push(new B(a.id))},a.prototype.addAlphaNode=function(b,c){var d,e,f,g,h,i,j,k,l,m,n;for(m=H.isArray(c)?c:[c,c,[]],l=m[0],h=m[1],k=m[2],n=a.prototype.alphaTypes,g=0,i=n.length;i>g;g++)if(d=n[g],d.isMatch(l)){e=new d(b,h,K(k)),(null!=(f=this.alphaNodes)[j=e.key]?f[j]:f[j]=[]).push(e);break}return this.nodes[b]=null!=e?e:new F(b,h,k)},a.prototype.addBetaNode=function(b,d){var e,f,g,h,i,j,k;for(h=d.slice(1),k=function(){var a,b,c;for(c=[],a=0,b=h.length;b>a;a++)j=h[a],c.push(this.addNode(j));return c}.call(this),i=a.prototype.betaTypes,f=0,g=i.length;g>f;f++)if(e=i[f],e.isMatch(d[0]))return this.nodes[b]=function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(e,[b].concat(c.call(k)),function(){})},a.prototype.addNode=function(a){var b;switch(b=""+a,!1){case 2!==a.length:return this.addNode(a[1]);case!this.isAlphaNode(H.isArray(a)?a[0]:a):return b in this.nodes?this.nodes[b]:this.addAlphaNode(b,a);default:return b in this.nodes?this.nodes[b]:this.addBetaNode(b,a)}},a.prototype.build=function(){var a;return a=new C(this.alphaNodes),this.alphaNodes={},this.nodes={},a},a}(),f.exports=D});var f={}.hasOwnProperty,g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a("scrape",function(a,b,c){var d,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;d=a("underscore"),A=a("util"),q=a("events"),j=a("data"),z=a("sizzle"),w=a("routes"),o=a("dom"),y=a("sha1"),n=b.defaultExcludes=["sz","dcopt","ord","tile","pos","uri","click","ksgmnt","null","undefined"],e=b._dart=function(){var a,c,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w;for(f=function(a){return z.find("script[src*="+i+"]",a).concat(z.find("iframe[src*="+i+"]",a))},i=".doubleclick.net",w={},e=[],e=e.concat(f(window.document)),h=z.find("iframe[src*=://"+window.location.hostname+"]").concat(z.find("iframe[src^=/]")),k=0,o=h.length;o>k;k++){g=h[k];try{a=g.contentWindow.document,e=e.concat(f(a))}catch(x){}}for(b.dartElements=e,l=0,p=e.length;p>l;l++){c=e[l],v=z.attr(c,"src"),q=v.match(/[^;]*;(.*)/),n=q&&q[1],s=A.parseKeyValues(n,";");for(m in s)r=s[m],t=w[m],t&&t!==r?(d.isArray(t)||(t=[t]),d.isArray(r)?t=t.concat(r):t.push(r),w[m]=d.uniq(t)):w[m]=r}return c=e[0],c&&(v=z.attr(e[0],"src"),q=v.match(/\.doubleclick\.net(\/[^;]*)/),u=q?q[1]:"",j.page_attr({dfpsite:u.split("/")[2],dfpzone:u.split("/")[3]})),w},i=void 0,h=function(a){var b,c,f,g,h,k,l;if(i&&!d.isEmpty(i)||(i=e()),b=new A.Set(a&&a._excludes||n),null==a)return i;if(d.isString(a))return i[a];h=[];for(c in a)k=a[c],g=j.namespace(c),d.isArray(k)?h.push(function(){var a,b,c;for(c=[],a=0,b=k.length;b>a;a++)f=k[a],i[f]?c.push(g(f,i[f])):c.push(void 0);return c}()):"*"===k?h.push(function(){var a;a=[];for(f in i)l=i[f],b[f]?a.push(void 0):a.push(g(f,l));return a}()):h.push(j.set(c,i[k]));return h},l=void 0,u=function(a,b){var c,d,e,f;if(e=""+a,!(null!=a&&e.length>0))return!1;for(c=0,d=b.length;d>c;c++)if(f=b[c],null!=e.match(f))return!1;return!0},m=function(a,b){var c,e,h,i,j,k,l,m,n,o,p,q,r,s;if(null==b&&(b={}),null==b.omitKeys&&(b.omitKeys=[]),null==b.omitValues&&(b.omitValues=[]),q={},null==a)return q;for(l=function(a,c){return u(a,b.omitKeys)&&u(c,b.omitValues)?q[a]?q[a].push(c):q[a]=[c]:void 0},o=d.isArray(a)?a.slice(0):[a],h=[window,document];o.length>0;){e=o.shift();for(j in e)if(f.call(e,j))if(s=e[j],A.isPrimitive(s))l(j,s);else if(d.isArray(s))for(i=0,k=s.length;k>i;i++)c=s[i],n={},n[j]=c,o.push(n);else if(d.isElement(s)){l(j,s);for(p in s)l(j+"."+p,s.getAttribute(p))}else if(d.isObject(s)&&g.call(h,s)<0){n={};for(m in s)r=s[m],n[j+"."+m]=r;h.push(s),o.push(n)}}return q},k=function(a,b){var c;return null==b&&(b=window.dataLayer),null==l&&(l=m(b)),(null!=(c=l[a])?c.length:void 0)<=1?l[a][0]:l[a]},b.clearDataLayerCache=function(){return l=void 0},p=function(a){var b,c,d,e,f,h,i,j,k,l,m;if(g.call(a,":")<0)return[];if(k=a.match(/^(.+):([^:]+)$/),e=k[0],m=k[1],i=k[2],h=z.find(m),!((null!=h?h.length:void 0)>0))return[];switch(!1){case"text"!==i&&"value"!==i:b=o[i],h=function(){var a,c,d;for(d=[],a=0,c=h.length;c>a;a++)f=h[a],d.push(b(f));return d}();break;case"@"!==i.charAt(0):j=i.substr(1),h=function(){var a,b,c;for(c=[],a=0,b=h.length;b>a;a++)f=h[a],c.push(o.attr(f,j));return c}();break;default:h=[]}for(l=[],c=0,d=h.length;d>c;c++)f=h[c],null!=f&&""!==f&&l.push(f);return l},t=b.ingestDataLayer=function(a,b){var c,e,g,h,i,j,l,n,o,p;if(null==b&&(b={}),null!=a){null==b.userKeys&&(b.userKeys=[]),null==b.omitKeys&&(b.omitKeys=[/gtm\./]),null==b.omitValues&&(b.omitValues=[/.*@.*(?:\..*)+/,/gtm\./]),null==b.keyNameMap&&(b.keyNameMap={}),h=function(a){return(""+a).replace(/([A-Z])/g,"_$1").replace(/^_/,"").replace(/__/g,"_").toLowerCase()},k=m(a,b),c={};for(i in k)f.call(k,i)&&(p=k[i],j=u(i,b.userKeys)?"page_attr_":"user_attr_",o=null!=(l=i.match(/[^.]*$/))?l[0]:void 0,e=b.useFullPath===!0?i:o,g=""+j+(b.caseSensitive?e:h(e)),g in b.keyNameMap&&(g=b.keyNameMap[g]),c[g]=d.union(null!=(n=c[g])?n:[],p));return c}},w.simple("ingestDataLayer",function(a,b){var c;return null==b&&(b={}),c=t(a,b),j.set(c),c}),r=b.extensions={dart:h,dataLayer:k,dom:function(a){return p(a)[0]},dom_multi:p,link_rel:function(a){return b.dom("link[rel="+a+"]:@href")},link_rev:function(a){return b.dom("link[rev="+a+"]:@href")},meta_name:function(a){return b.dom("meta[name="+a+"]:@content")},meta_property:function(a){return b.dom("meta[property="+a+"]:@content")},opengraph:function(a){return b.meta_property("og:"+a)},url_path:function(a){return b.location.pathname.split("/")[a]},url_param:function(a){var c;return c=b.location.href.match("\\b"+a+"(?:=|\\b)([^&#]*)"),c&&(decodeURIComponent(c[1])||!0)},url_hash:function(a){return[""].concat(String(window.location.hash).replace(/^(?:#|\/){0,}/,"").split("/"))[a]},url_host:function(a){return b.location.hostname.split(".").reverse()[a-1]},url_domain:function(a){return d.last(b.location.hostname.split("."),a).join(".")},cookie:function(a){var b;return b=window.document.cookie,b&&(b=b.match("\\b"+a+"=([^;]*)"))&&decodeURIComponent(b[1])},data:function(a){return j.get(a)},javascript:function(a){var b,c;try{return window.eval(a)}catch(c){b=c,q.fire("error",b)}},js_global:function(a){var b,c;try{for(c=window,b=a.split(".");c&&b[0];)c=c[b.shift()];return c}catch(d){}},onboard:function(a){var b;return b=a.toLowerCase().replace(/\s+/g,"").replace(/\+[^@]+@gmail/,"@gmail"),""!==b?y.hash(b):void 0}};for(v in r)s=r[v],b[v]=s,w.simple("scrape."+v,s);b.location=window.location,x=b.scrape=function(a){var b,c,d,e,f,g;f={};for(e in a){d=a[e],b=void 0;for(c in d)if(null!=r[c]){b=c;break}if(null==b){q.fire("error",{message:"No extension found",scrape:a});break}g=r[b](d[b]),f[e]=g}return f},w.simple("scrape",function(a){var b;return b=x(a),j.set(b),b})});var f={}.hasOwnProperty,g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a("segments",function(a,b,c){var d,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;if(l=a("underscore"),T=a("util"),s=a("config"),u=a("data"),C=a("json"),H=a("privacy"),I=a("proxy"),k=a("rules-network"),Q=a("store"),S=a("timing"),v=a("events"),r=s.init(),h=3*S.DAYS,e=1*S.DAYS,i=1*S.MONTHS,d="_",j="rt",F=T.param("segs"),null!=F&&u.set("user_segments",F.split(",")),b.allRealtime=l.pluck(u.get("config_segments"),"id"),B=a("expression").eval,O={user_segments:"segs",all_user_segments:"allsegs"},t=[],M=function(a,b){return null==b&&(b=e),Q.set("rt_"+a,"1",b)},N=function(a){var b,c;for(b in O)c=O[b],u.set(b,a),Q.set(c,a.join(","),h);t=l.uniq(t.concat(n(j),a))},R=b.syncSegments=function(){var a;return a=l.now(),I.client(function(b,c){return null==b?c.get("segs",function(b,d){var g,h,i,j,k,l;l=d.value,j=C.parse(l,{});for(k in j)f.call(j,k)&&(g=j[k],Number(g)<=a?delete j[k]:M(k,Number(g)-a));for(h=0,i=t.length;i>h;h++)k=t[h],j[k]=a+1e3*e;return N(function(){var a;a=[];for(k in j)a.push(k);return a}().sort(function(a,b){switch(!1){case j[a]!==j[b]:return 0;case!(j[a]>j[b]):return-1;default:return 1}})),c.set("segs",C.stringify(j))}):void 0})},r.get("params.store_realtime_segments",!1)&&v.onOnce("pixel",R),P=function(a){return null==a&&(a=d),a===d?"segs":"segs_"+a},n=b.bucket=function(a){var b;return null==a&&(a=d),b=Q.get(P(a)),b?b.split(","):[]},L=b.rete=T.once(function(){var a,b,c,d,e;for(a=new k,d=u.get("config_segments",[]),b=0,c=d.length;c>b;b++)e=d[b],a.addRule(e);return a.build().open()}),K=b.realtime=function(){var a,b,c,d,e,f,i,k,m,o,p;if(d=[],t.length=0,!H.isOptOut()){if(a=u.get("config_segments",[]),r.get("params.optimize_realtime_segments",!1))m=L().results(),d.push.apply(d,m),t.push.apply(t,m),Q.forEach(function(b,e){return 0===e.indexOf("rt_")&&g.call(m,e)<0&&g.call(a,e)>=0?d.push(c):void 0});else for(b=0,f=a.length;f>b;b++)k=a[b],c=k.id,p=k.test,B(p)?(d.push(c),t.push(c)):Q.get("rt_"+c)&&d.push(c);for(e=0,i=t.length;i>e;e++)c=t[e],M(c)}return o=r.get("params.store_realtime_segments",!1)?l.uniq(t.concat(n(j),d)):l.uniq(t.concat(d)),Q.set(P(j),o,h),o},G=b.prioritizedSegments=function(){return u.get("prioritized_segments",[])},D=b.maxSegments=function(){return u.get("max_segments")||0},p=b.compute=function(){var a,c,d,e,f,i,j,k,m;if(H.isOptOut())for(d in O)k=O[d],T.remove(d),Q.remove(k);else F||(j=n(),m=l.difference(j,b.allRealtime),u.set("user_segments",m),c=l.uniq(K().concat(m)),N(c),f=G(),e=D(),f.length>0&&e>0&&c.length>e&&(a=function(){var a,b,d;for(d=[],a=0,b=f.length;b>a;a++)i=f[a],g.call(c,i)>=0&&d.push(i);return d}().slice(0,e),u.set("user_segments",a),Q.set("segs",a.join(","),h)))},A=b.handleUserDataResponse=function(a){var b,c,d,e,f,g;if(e=a.segments,d=a.kuid,f=a.technographics,H.storeKuid(d),null!=e)if(l.isArray(e))Q.set(P(),e.join(","),h);else if(l.isObject(e))for(b in e)g=e[b],Q.set(P(b),g.join(","),h);null!=f&&(Q.set("tech",T.paramString(f),i),
J()),r.get("params.fingerprint")&&(c=null!=a.kfuid?a.kfuid:u.get("fp"),Q.set("fp_id",c,H.USER_ID_TTL),u.set("fp_id",c)),p(),v.fire("user_data_response",a)},J=b.readTechFromStore=function(){var a,b,c,d;if(c=Q.get("tech")){if(1!==u.get("pixel_data__knopii")){b=T.parseKeyValues(c);for(a in b)d=b[a],u.set("user_attr_kx_tech_"+a,d)}return!0}return!1},x={url:u.get("url_userdata"),callback:"kxjsonp_userdata",done:A,data:{pub:u.get("pubid")}},E=Q.get("org_user_id"),E&&(x.data._kuid=E),o=r.get("buckets"),(null!=o?o.length:void 0)>0&&(g.call(o,d)<0&&o.push(d),x.data.buckets=o.join(",")),r.get("params.fingerprint",!1)&&(y=u.get("fp"),x.data.kxfp=y,z=u.get("fp_id"),(null!=z?z.length:void 0)!==(null!=y?y.length:void 0)&&(x.data.kfuid=z)),J()||(x.data.technographics=1),w=b.fetch=function(){v.fireOnce("user_data_request"),a("http").jsonp(x)},!u.get("segWait")){switch(u.set("segWait",1,5*S.MINUTES),r.get("params.user_data_timing")){case"asap":w();break;case"ready":v.onOnce("dom:ready",w);break;default:v.onOnce("dom:load",w)}v.fire("user_data_fetch_scheduled")}Q.get("segs"),r.get("params.store_realtime_segments",!1)&&R(),p(),m=Q.get("allsegs")?Q.get("allsegs").split(","):[],u.set("all_user_segments",m),r.get("params.optimize_realtime_segments",!1)?(v.on("data:change",function(a){var b,c,d;return b=a.key,d=a.value,c=L().results(),L().set("$"+b,d),l.difference(L().results(),c).length>0?p():void 0}),u.user_attr.change(p),u.page_attr.change(p)):(q=l.throttle(p,100),u.user_attr.change(q),u.page_attr.change(q)),u.namespace("event").change(p),a("test").module("segments",function(a){v.happened("user_data_fetch_scheduled")&&a("user_data_response",v.happened("user_data_response"))})});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("sha1",function(a,b,c){var e,f,g,h,i;h=a("crypto-util"),i=a("routes"),g=[],e={20:1518500249,40:1859775393,60:1894007588,80:899497514},f=function(){function a(a){this._message=null!=a?a:"",this._process=d(this._process,this),this._append=d(this._append,this),this.update=d(this.update,this),this.reset=d(this.reset,this),this.clone=d(this.clone,this),this.toString=d(this.toString,this),this.finalize=d(this.finalize,this),this.reset(),this._append(this._message)}return a.prototype._minBufferSize=0,a.prototype.finalize=function(){var a,b,c;return c=this._data,a=h.calculateSigBytesForWords(c),b=8*a,c[b>>>5]|=128<<24-b%32,c[(b+64>>>9<<4)+14]=Math.floor(b/h.MAX_WORD),c[(b+64>>>9<<4)+15]=b,this._process(),String(this)},a.prototype.toString=function(){return h.fromWordsToHex(this._hash)},a.prototype.clone=function(){var b;return b=new a(this._message),b._hash=this._hash.slice(0),b},a.prototype.reset=function(){return this._hash=this._getInitial(),this._data=[],this},a.prototype.update=function(a){return this._append(a),this},a.prototype._append=function(a){var b;return this._message+=a,b=h.fromUtf8ToWords(a),this._data.push.apply(this._data,b),this},a.prototype._process=function(){var a,b,c,d,e,f,g,i;if(i=this._data,c=i.length*h.BYTES_PER_WORD,a=16,b=4*a,d=c/b,e=d*a,g=void 0,e){for(f=0;e>f;)this._processBlock(i,f),f+=a;g=i.splice(0,e)}return g},a.prototype._processBlock=function(a,b){var c,d,f,h,i,j,k,l,m;for(c=this._hash,d=c[0],f=c[1],h=c[2],i=c[3],j=c[4],k=0;80>k;)16>k?g[k]=0|a[b+k]:(l=g[k-3]^g[k-8]^g[k-14]^g[k-16],g[k]=l<<1|l>>>31),m=(d<<5|d>>>27)+j+g[k],m+=20>k?(f&h|~f&i)+e[20]:40>k?(f^h^i)+e[40]:60>k?(f&h|f&i|h&i)-e[60]:(f^h^i)-e[80],j=i,i=h,h=f<<30|f>>>2,f=d,d=m,k++;c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+h|0,c[3]=c[3]+i|0,c[4]=c[4]+j|0},a.prototype._getInitial=function(){var a;return a=[1732584193,4023233417,2562383102,271733878,3285377520],function(){return a.slice(0)}}(),a}(),b.hash=function(a){return new f(a).finalize()},i.simple("hash:sha1",b.hash)}),a("sizzle",function(a,b,c){var d,e,f,g,h,i,j,k,l;f=a("underscore"),l=a("util"),h=a("dom"),e=/^(?:(\w+)|(\*(?=\W|$))|\.([\w\-]+)|#([\w\-]+))([#\.\w\-]*)/,d=/^\[([\w\-]+)(?:(\W?=)(["']?)([^\]]*)\3(["']?))?\]/,g=b.attr=h.attr,k=b.hasAttr=function(a,b){var c;return a.hasAttribute?a.hasAttribute(b):!(!(c=a.attributes[b])||!c.nodeValue)},i=function(a,b,c,d){var e,f,h,i,j,m,n;for(m=function(a){return function(c){return!!g(c,b).match(a)}},e=d&&l.escapeRegexp(d),n=c?"="===c?function(a){return g(a,b)===d}:"!="===c?function(a){return g(a,b)!==d}:"*="===c?function(a){return g(a,b).indexOf(d)>=0}:"~="===c?m("(^|\\s)"+e+"(\\s|$)"):"|="===c?m("^"+e+"\\b"):"$="===c?m(e+"$"):"^="===c?m("^"+e):"false":function(a){return k(a,b)},j=[],f=0,h=a.length;h>f;f++)i=a[f],n(i)&&j.push(i);return j},j=b.getElementsByClassName=function(a,b){return f.isString(a)&&(b=a,a=window.document),a.getElementsByClassName?a.getElementsByClassName(b):i(a.getElementsByTagName("*"),"class","~=",b)},b.find=function(a,b){var c,g,h,k,l,m,n,o,p,q,r,s;for(null==b&&(b=window.document),s=function(){throw new Error("Error parsing selector query: "+a)},f.isArray(b)||(b=[b]),c=b,r=[],q=void 0,k=0,h=function(a,b){return b[1]?f.toArray(a.getElementsByTagName(b[1])):b[2]?f.toArray(a.getElementsByTagName("*")):b[3]?f.toArray(j(a,b[3])):b[4]&&(b=a.getElementById(b[4]))?[b]:[]},g=function(){r=r.concat(c===b?[]:c),c=b},p=function(a,b){return function(){var c;return(c=q.match(a))?(b(c),c[0].length):0}},n=p(e,function(a){var b,d,e,f,g,j;for(f=[],b=0,d=c.length;d>b;b++)g=c[b],f=f.concat(h(g,a));for(c=f,j=a[5]||"";e=j.match(/^([\.#])([\w\-]+)/);)c="."===e[1]?i(c,"class","~=",e[2]):i(c,"id","=",e[2]),j=j.slice(e[0].length);if(j)throw new Error("parse error")}),l=p(d,function(a){c=i(c,a[1],a[2],a[4])}),o=p(/\s*/,function(){}),m=p(/,/,g);q=a.slice(k);)k+=n()||l()||m()||o()||s();return g(),r}}),a("sniff",function(a,b,c){var d,e,f,g,h;f=a("underscore"),h=a("util"),e="0",d={CHROME:"Chrome",EDGE:"Edge",FIREFOX:"Firefox",IE:"IE",OPERA:"Opera",OTHER:"Other",PHANTOM:"Phantom",SAFARI:"Safari"},g=function(a,b){var c,g,i,j,k,l,m,n,o,p;return null==a&&(a=null!=(o=window.navigator)?o.userAgent:void 0),null==b&&(b=window.navigator),l=function(b){var c;switch(null==b&&(b=a),c=f.partial(h.matchAll,b),!1){case!c("Edge"):return d.EDGE;case!(c("Chrome","OPR")||c("Presto")):return d.OPERA;case!(c("Chrome")||c("CriOS")):return d.CHROME;case!(c("Trident","Windows")||c("MSIE")):return d.IE;case!c("PhantomJS"):return d.PHANTOM;case!((c("Safari","like Gecko")||c("iPhone")||c("iPad"))&&!c("Linux")&&c("KHTML")):return d.SAFARI;case!c("Gecko","Firefox"):return d.FIREFOX;default:return d.OTHER}},n=function(b,c){var f;switch(null==c&&(c=a),f=function(a){var b;return null!=(b=c.match(a))?b[1]:void 0},!1){case b!==d.EDGE:return f(/Edge\/(\d+)/i);case b!==d.SAFARI:return f(/Version\/(\d+)/i);case b!==d.CHROME:return f(/(?:Chrome|CriOS)\/(\d+)/i);case b!==d.IE:return f(/(?:MSIE\s|rv:)(\d+)/i);case b!==d.FIREFOX:return f(/Firefox\/(\d+)/);case b!==d.OPERA:return f(/(?:OPR|Version)\/(\d+)/);case b!==d.PHANTOM:return f(/(?:PhantomJS)\/(\d+)/);default:return e}},m=function(){var a,c,d,e,f;for(e=["language","systemLanguage","browserLanguage","userLanguage"],a=0,d=e.length;d>a;a++)if(c=e[a],f=null!=b?b[c]:void 0,null!=f)return f.substring(0,2);return""},c=l(),p=n(c),k=c===d.IE,i=function(a){return k&&p===""+a},j=c===d.FIREFOX,{UNKNOWN_VERSION:e,Browsers:d,browser:c,bucket:function(){switch(!1){case!k:return"IE."+p;case!j:return g=Number(p)<4?"3x":"4plus",c+"."+g;default:return c}}(),is:c,ff:j,ie:k,ie6:i(6),ie7:i(7),ie8:i(8),ie9:i(9),ie10:i(10),ie11:i(11),lang:m(),msie:k,parse:function(b){return null==b&&(b=a),c=l(b),{browser:c,version:n(c,b),language:m()}},ua:a.toLowerCase(),version:p}},c.exports=g(),c.exports.sniff=g}),a("social",function(a,b,c){var d,e,f,g,h,i,j,k,l;l=a("util"),d=a("data"),e=a("events"),j=a("routes"),e.on("social",function(b){var c;c=l.rewriter({facebook:"fb",twitter:"twttr"}),a("http").pixel({url:d.get("url_social"),data:{_kpid:d.get("pubid"),_kcp_s:d.get("site"),_ksoc_t:c(b.provider),_ksoc_e:b.action,_ksoc_url:b.url,_kpa_title:window.document.title}})}),g=function(a,b,c){e.fire("social",{provider:a,action:b,url:c})},f=function(a,b){g("facebook",a,b)},k=function(a){g("twitter","tweet",a)},h=b.init_facebook=function(){var a;a=(a=window.FB)&&(a=a.Event)&&a.subscribe&&l.bind(a.subscribe,a),a?(a("edge.create",l.bind(f,null,"like")),a("edge.remove",l.bind(f,null,"unlike")),a("message.send",l.bind(f,null,"send")),a="done"):a="fail",e.fire("social.init_facebook",{status:a})},i=b.init_twitter=function(){var a;a=(a=window.twttr)&&(a=a.events)&&a.bind&&l.bind(a.bind,a),a?(a("tweet",function(a){k(a&&a.target&&"IFRAME"===a.target.nodeName?a.target.src:null)}),a="done"):a="fail",e.fire("social.init_twitter",{status:a})},j.simple("social.init",function(){window.setTimeout(function(){h(),i()},1e3)})});var d=function(a,b){return function(){return a.apply(b,arguments)}};a("stateful",function(a,b,c){var e,f,g,h,i;i=a("json"),h=a("underscore"),e="all",g=/(?:([a-z]*):)?([^:]+)$/i,f=function(){function a(a,b){this._raw=null!=a?a:{},this._defaults=null!=b?b:{},this._mkRemover=d(this._mkRemover,this),this._addHandler=d(this._addHandler,this),this._fire=d(this._fire,this),this.toString=d(this.toString,this),this.watch=d(this.watch,this),this.remove=d(this.remove,this),this.has=d(this.has,this),this.set=d(this.set,this),this.get=d(this.get,this),this._handlers={all:[]}}return a.prototype.get=function(a){var b;return b=this._raw[a],null!=b?b:this._defaults[a]},a.prototype.set=function(a,b){var c;return c=this._raw[a],this._raw[a]=b,this._fire("set",a,c,b),this},a.prototype.has=function(a,b){return null!=this._raw[a]||b&&null!=this._defaults[a]},a.prototype.remove=function(a,b){var c,d;return c=function(b){return function(c,d){null!=d&&b._fire(c,a,d,void 0)}}(this),d=this._raw[a],delete this._raw[a],c("remove",d),b&&(d=this._defaults[a],delete this._defaults[a],c("removeDefault",d)),this},a.prototype.watch=function(a,b,c){var d,f,i,j;if(!h.isFunction(b))throw new Error("Watch expected function, but got: "+b+" \nContext: "+this);return j=void 0,d=void 0,f=a.match(g),a===e?(d="",j=a):f[1]&&f[1]!==e?(j=f[1],d=f[2]):(d=f[2],j=e,a=j+":"+d),i=this._mkRemover(a,b),this._addHandler(a,{context:c,fn:b,key:d,remove:i,type:j}),i},a.prototype.toString=function(){return"Stateful"+i.stringify(this._raw)},a.prototype._fire=function(a,b,c,d,f){var g,h,i,j,k,l,m,n;for(i=this._handlers,k=function(a){return a.fn.call(a.context||null,b,c,d)},g=function(b){return i[e].concat(i[e+":"+b]||[]).concat(i[a+":"+b]||[])},m=g(b),j=0,l=m.length;l>j;j++)h=m[j],n=k(h),null!=n&&((f||this._raw)[b]=n);return this},a.prototype._addHandler=function(a,b){var c;return c=this._handlers[a],c||(c=this._handlers[a]=[]),c.push(b),this},a.prototype._mkRemover=function(a,b){return function(c){return function(){var d;c._handlers[a]=function(){var c,e,f,g;for(f=this._handlers[a],g=[],c=0,e=f.length;e>c;c++)d=f[c],d.fn!==b&&g.push(d);return g}.call(c)}}(this)},a}(),b.init=function(a,b){return new f(a,b)},b.Stateful=f}),a("stats",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;d=a("underscore"),o=a("sniff"),i=a("events"),g=a("data"),h={counter:{},time:{}},j=b.get=function(a,b){return h[a][b]},n=b.set=function(a,b,c){h[a][b]=c},b.time=function(a,b){n("time",a,b)},k=b.inc=function(a){var b;b=j("counter",a)||0,n("counter",a,b+1)},l=b.incPath=function(a){var b;b=a.split("."),d.times(b.length,function(a){k(d.first(b,a+1).join("."))})},p=0,e="."+o.bucket,f="."+g.get("config_param_control_tag_version"),q=f+e,l("views"+q),i.on("social",function(a){k(a.provider+"."+a.action)}),i.on("tag:done",function(){l("tags_delivered"+q)}),m=0,i.on("error",function(){var a,b;try{if(m>10)return;m++,l("js_errors"+q)}catch(a){return void(b=a)}}),p=".alpha"===f?1:".beta"===f||".stable"===f?.01:.001,Math.random()<p&&i.onOnce("tag:all_done",function(){var b,c,d,e;b=function(a,b,c){return"controltagv2."+b+":"+c+"|"+a},d=function(){var a,d;a=h.counter,d=[];for(c in a)e=a[c],d.push(b("c",c,e));return d}().concat(function(){var a,d;a=h.time,d=[];for(c in a)e=a[c],d.push(b("ms",c,e));return d}()).join(","),a("http").pixel({url:g.get("url_stats"),data:{q:d,format:"gif"}})})});var c=[].slice;a("store",function(a,b,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;f=a("underscore"),B=a("util"),o=a("feature"),s=a("json"),D=a("whitelist"),A=a("timing"),m=a("events"),u=function(){var a;try{return window.localStorage}catch(a){return l=a,null}}(),k=window.document,E=["set","get","remove","count","namespace"],n=E.concat(["clear","count","forEach"]),x="",C=b.whitelist=D.init(D.ALL),b.allowAll=B.bind(C.allowAll,C),b.allowNone=B.bind(C.allowNone,C),b.allowOnly=B.bind(C.allowOnly,C),b.SECONDS=A.SECONDS,b.MINUTES=A.MINUTES,b.HOURS=A.HOURS,b.DAYS=A.DAYS,e=b.READY_EVENT="store:ready",z=function(a){return new Date(f.now()+1e3*a)},g=function(a){return b.prefix&&0!==a.indexOf(x)&&(a=x+a),a},y=function(a){return b.prefix?a.replace(new RegExp("^"+x),""):a},j={domain:function(a){return"; domain="+a}},q=function(a){return C.has(y(a))||C.has(a)},i=b.cookie={_COOKIE_START:"(?:^|\\s|;)",set:function(a,b,c,d){return q(a)?i._set.apply(i,arguments):""},get:function(a,b){var c,d,e;return null==b&&(b=""),e=""+i._COOKIE_START+a+"=([^;]*)",c=null!=(d=k.cookie)?d.match(e):void 0,null!=c?window.decodeURIComponent(c[1]):b},count:function(a,b,c){return null==b&&(b=1),null==c&&(c=A.endOfDay()),i.set(a,Number(i.get(a,0))+b,c)},remove:function(a,b){null==b&&(b={}),i._set(a,0,-1,b)},namespace:function(a){var b,c;return b={},c=new RegExp(""+i._COOKIE_START+a+"([^=]*)=([^;]*)","g"),k.cookie.replace(c,function(a,c){b[decodeURIComponent(a)]=decodeURIComponent(c)}),b},forEach:function(a){return null==a&&(a=function(a,b){}),t.until(function(b,c){return a(b,c),!1})},until:function(a){var c,d,e,f,g,h,i;for(null==a&&(a=B.yes),g=k.cookie.split(/\s*;\s*/),c=0,e=g.length;e>c;c++)if(f=g[c],0===f.indexOf(b.prefix)&&(h=f.split("="),d=h[0],i=h[1],a(i,d.slice(b.prefix.length))))return},clear:function(a){var b,c,d,e,f,h,j;for(null==a&&(a=B.yes),f=k.cookie.split(/\s*;\s*/),b=0,d=f.length;d>b;b++)e=f[b],h=e.split("="),c=h[0],j=h[1],q(c)&&a(j,y(c))||i.remove(g(c))},size:function(){return B.measureString(k.cookie.replace(/(?:;\s*|=)/g,""))},_set:function(a,b,c,d){var e,f;return e=c?"; expires="+z(c).toUTCString():"",f=a+"="+encodeURIComponent(b)+i._optionsToCookie(d)+";path=/"+e,k.cookie=f,f},_optionsToCookie:function(a){var b,c,d;c="";for(b in a)d=a[b],b in j&&(c+=j[b](d));return c}},v=function(a){var b,d,e,g,h;for(b=f.clone(a),g=function(b){return function(){var d;d=1<=arguments.length?c.call(arguments,0):[];try{return a[b].apply(a,d)}catch(e){}}},d=0,e=E.length;e>d;d++)h=E[d],b[h]=g(h);return b},t=b.local=u&&v({set:function(a,b,c){return q(a)?(u.setItem(a,b),c?u.setItem("_"+a,+z(c)):u.removeItem("_"+a),b):""},get:function(a,b){var c,d;return null==b&&(b=""),d=u.getItem(a),c=u.getItem("_"+a),c&&c<=new Date&&(d=null,t.remove(a)),d||b},remove:function(a){u.removeItem(a),u.removeItem("_"+a)},count:function(a,b,c){return null==b&&(b=1),null==c&&(c=A.endOfDay()),t.set(a,Number(t.get(a,0))+b,c)},namespace:function(a){var c,d,e;e={};for(d in u)c=d.match("^"+a+"(.*)"),c&&(e[c[1]]=b.get(c[1]));return e},forEach:function(a){return null==a&&(a=function(a,b){}),t.until(function(b,c){return a(b,c),!1})},until:function(a){var c;null==a&&(a=B.yes);for(c in u)if(0===c.indexOf(b.prefix)&&a(t.get(c),c.slice(b.prefix.length)))return},clear:function(a){var b;null==a&&(a=B.yes);for(b in u)q(b)&&a(t.get(b),y(b))||t.remove(g(b))},size:function(){return B.measureString(s.stringify(localStorage))}}),w=a("ns"),x=b.prefix="kx"+(w.isDefault?"":w.name+"_"),h=function(a){var b,d,e,h,i;for(b=f.clone(a),i=function(b){return function(){var d,e;return e=arguments[0],d=2<=arguments.length?c.call(arguments,1):[],null==e&&(e=""),a[b].apply(a,[g(e)].concat(c.call(d)))}},d=0,e=E.length;e>d;d++)h=E[d],b[h]=i(h);return b},r=void 0,p=function(){var a,c,d,e;if(null==r)for(e=o.hasLocalStorage()?t:i,r=h(e),a=0,c=n.length;c>a;a++)d=n[a],b[d]=r[d];return r},b.set=p().set,b.get=p().get,b.remove=p().remove,b.count=p().count,b.namespace=p().namespace,b.clear=p().clear,b.count=p().count,b.forEach=p().forEach,b.init=function(){var a;return a=p(),m.fire(e),a}}),a("tag-actions",function(a,b,c){var d,e,f,g,h,i,j;j=a("util"),e=a("data"),f=a("tag-delivery"),g=a("tag-delivery-timing"),h=a("events"),d="tag:all_done",i=function(a,b){return function(a){var c,i,j;h.clear("tag"),i=function(){var a,c,d,g;for(d=e.get("tags"),g=[],a=0,c=d.length;c>a;a++)j=d[a],b(j)&&(f.forget(j),g.push(j));return g}(),g.init(i),h.on(d,c=function(){a(null),h.off(d,c)})}},b.DEFAULT="all",b[b.DEFAULT]=i("*",j.yes)}),a("tag-delivery-timing",function(a,b,c){var d,e,f,g,h,i,j,k;d=a("underscore"),k=a("util"),f=a("data"),i=a("events"),e=a("config"),g=a("tag-delivery"),h=a("dom"),j=b.isDone=function(a){var b;return null!=(null!=(b=a.time)?b.end:void 0)||null!=a.error||a.metCriteria===!1},b.init=function(a){var b,c,l,m,n,o;for(l=0,n=a.length;n>l;l++)o=a[l],g.uniqueName(o);return b=function(){d.all(a,j)&&(b=k.noop,i.fireOnce("tag:all_done"))},i.on("tag:done",function(){b()}),i.on("tag:fail",function(){b()}),b(),m=function(a,b){var c;if(c=a===b,!(f.get("schema_version",2)>=3))return c;switch(a){case"onready":return"onload"!==b;case"onload":return!0;default:return c}},c=function(c){var d,e,f;for(d=0,e=a.length;e>d;d++)f=a[d],!g.isIdDelivered(f.id)&&m(c,f.timing)&&g.meetsCriteria(f)&&g.deliver(f);b()},h.ready(k.once(function(){return h.createHead(e.init().get("confid")),c("asap"),c("onready")})),h.load(k.once(c,null,"onload")),g.init(),{deliver:c,isDone:function(){return b!==k.noop}}}}),a("tag-delivery",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;d=a("underscore"),A=a("util"),h=a("events"),f=a("data"),g=a("dom"),i=a("geo"),l=a("hash-set"),p=a("ns"),v=a("store"),C=a("x-frame"),t=a("routes"),s=a("postscribe"),k=function(a){var b;return a&&a.nodeType?a:a&&(b=a.match(/^(head|body)$/))?window.document[b[1]]:window.document.getElementById(a)},w=null,n=b.mode=function(){switch(!1){case"1"!==A.param("writeCapture"):return"writeCapture";case"1"!==A.param("writeNativeIframe"):return"nativeIframe";case"1"!==A.param("writeOld"):return"old";default:return"newWriter"}}(),b.forget=function(a){return a.metCriteria=void 0,a.time={},a.delivered=!1,a},x={},f.set("tagsByName",x),z=b.uniqueName=function(a){var b,c;if(!a.named){for(c=a.name,b=1;null!=x[c];)b++,c=a.name+"_"+b;a.name=c,a.named=!0,x[c]=a}},B=function(a,b,c,d){var e,f,g,h,i,j;if(a.root=b,null==a.content&&(a.content=""),g=0===a.template_replacement?a.content:u(a.content),j=window.Krux,f=function(){w=y(),w.tag={id:a.id,name:a.name,method:a.method,target:a.target,target_action:a.target_action},p.isDefault||(window.Krux=p.self)},e=function(){w=null,p.isDefault||(window.Krux=j)},"writeCapture"===n)return f(),window.$(b).attr("data-writeCapture","true"),window.$(b).writeCapture().html(g,{done:c}),e();if("nativeIframe"===a.method||"native"===n&&a.target)return f(),b.ownerDocument.write(g),e(),c();try{return s(b,g,{afterDequeue:f,afterStreamStart:e,done:c,error:d,name:a.name,releaseAsync:!0})}catch(i){return h=i,d(h)}},j=b.getTagContext=function(a){return null!=w?w[a]:void 0},t.simple("context",j),t.simple("nativeTag",function(a){"native"===n&&b.deliver(f.get("tagsByName")[a])}),t.simple("writeHtml",function(a,c,d){return b.deliver({name:d||"Anonymous",content:c,target:a[0]||a})}),r=function(a,b){var c,d;return d=a.target?k(a.target):g.kxhead||window.document.getElementsByTagName("script")[0].parentNode,d&&(c=a.target_action||"append",g[c](d,b)),d},e=function(a){var b;return b={"class":"kxtag","data-id":a.id,"data-alias":a.name},b["class"]+=a.target?" kxtargeted":" kxinvisible",b},m={eval:function(a,b,c){var d,e,f;f=void 0;try{f=A.globalEval(a.content)}catch(e){d=e,c(d)}return b(),f},apply:function(a,b,c){var d,e,f;f=void 0;try{f=a.content.apply(null)}catch(e){d=e,c(d)}return b(),f},document:function(a,b,c){var d,f;return d=g.createElement("span",e(a)),f=r(a,d),f?B(a,d,b,c):b(),d},iframeCommon:function(a,b,c,d){var f,h,i,j,k;return f=e(a),f.width=f.height=0,f.scrolling="no",f.style="overflow:hidden;",j=a.name.match(/(\d+)x(\d+)/),j&&(f.width=j[1]+"px",f.height=j[2]+"px"),h=g.createElement("iframe",f),k=r(a,h),k?(i=h.contentWindow.document,i.open(),i.write("<html><head></head><body style='margin:0;'>"),d.leaveOpen||i.close(),d.onIframe&&d.onIframe(h),h.contentWindow.Krux=window.Krux,B(a,h.contentWindow.document.body,b,c)):b(),h},nativeIframe:function(a,b,c,d){return d.leaveOpen=!0,m.iframeCommon(a,b,c,d)},iframe:function(a,b,c,d){return m.iframeCommon(a,b,c,d)}},y=b.templateData=function(){var a;return{id:null!=(a=f.get("currentTag"))?a.id:void 0,pubid:f.get("pubid"),site:f.get("site"),geo:i.get(),now:new Date}},u=b.runTemplate=function(a){return d.templateSettings={evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g,escape:/\{%-([\s\S]+?)%\}/g},d.template(a,y())},b.meetsCriteria=function(b){var c,d,e,g;if(b.once_per_page&&q.has(b))return b.metCriteria=!1;if(null==b.criteria)return b.metCriteria=!0;if("native"===n&&null!=b.target)return b.metCriteria=!1;f.set("now",new Date),b.freq_cap&&f.set("tag_deliveries_today",+v.get("tag"+b.id+".day",0)),g={currentTag:b,frequency:+v.get("visits"),geolocation:i.get("country"),throttle:b.random,url:document.location.href};for(c in g)e=g[c],f.setSilently(c,e);d=b.metCriteria=a("expression").eval(b.criteria);for(c in g)f.remove(c);return d},o=0,q=p.self._oneTimeTags=p.self._oneTimeTags||l.create(function(a){return a.id}),b.isIdDelivered=function(a){var b;return(null!=(b=d.find(f.get("tags",[]),function(b){return b.id===a}))?b.delivered:void 0)===!0},b.deliver=function(a,b){var c,e,f,g,i,j,k;if(null==b&&(b={}),j=a.once_per_page,j&&q.has(a))return q.get(a).id;z(a),a.id=a.id||o++,a.time={mode:"async",start:A.ms()},null==a.method&&(a.method=d.isFunction(a.content)?"apply":"document"),"nativeIframe"===n&&a.target&&(a.method="nativeIframe"),a.delivered=!0,f=function(){a.time.end=A.ms(),a.time.duration=a.time.end-a.time.start},i=function(b){a.error=b&&b.message&&b||{message:"unknown error"},h.fire("tag:fail",{id:a.id,alias:a.name,error:a.error.message})},h.fire("tag:started",{id:a.id,alias:a.name}),c=function(){f(),a.freq_cap&&v.count("tag"+a.id+".day"),h.fire("tag:done",{id:a.id,alias:a.name})};try{k=m[a.method](a,c,i,b),j&&q.put({id:a.id})}catch(g){e=g,i(e)}return k},b.claimOneTimers=function(a){var b,c,e,f;null!=a&&(e=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)f=a[b],f.once_per_page&&d.push(f);return d}()),b=d.now(),c=function(){var a,c,d,g;for(d=e||[],g=[],a=0,c=d.length;c>a;a++)f=d[a],g.push({id:f.id,claimId:b});return g}(),c.length&&(C.broadcast({tags:c}),C.listen(function(a){var b,d,e,g,h,i,j,k;for(k=[],j=a.data.tags,e=0,h=j.length;h>e;e++){for(f=j[e],d=void 0,g=0,i=c.length;i>g;g++)if(b=c[g],b.id===f.id){d=b;break}f.claimId<(null!=d?d.claimId:void 0)&&k.push(f)}q.put.apply(q,k)}))},b.init=A.once(function(){v.count("visits"),a("test").module("tag-delivery",function(a){var b,c,d,e,g,i,j,k,l,m;for(m={},l=function(b){var c;return c=b.timing,a("tag_valid_timing_name",c,c),m[c]=m[c]||{lastStart:0}},e=f.get("tags"),c=0,d=e.length;d>c;c++)i=e[c],h.happened("dom:beforeunload")||h.happened("dom:unload")||a("tag_considered",null!=i.metCriteria,i.name),i.metCriteria&&(j=i.time||{},g=j.start,b=j.end,a("tag_delivered",b,i.name),k=l(i),a("tag_order",g>=k.lastStart,i.name),k.lastStart=g)})})}),a("tag",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;d=a("underscore"),j=a("events"),e=a("tag-actions"),f=a("dag"),h=a("tag-delivery"),i=a("tag-delivery-timing"),k=a("privacy"),l=a("routes"),g=a("data"),m=function(a,b,c){var e,f,g,h,i;for(h=[],e=f=0,g=a.length;g>f;e=++f)i=a[e],b(i,e,a)&&c(i,e,a),d.isArray(i)?h.push(m(i,b,c)):h.push(void 0);return h},n=b.sorted=function(a){var b,c,e,g,h,i,j,k,l,n,o,p,q,r;for(a=a.sort(function(a,b){var c,d;switch(c=a.lid,d=b.rid,!1){case!(d>c):return-1;case!(c>d):return 1;default:return 0}}),c=f.create(),p=function(a){var b;return b=a[0],"afterTag"===b||"beforeTag"===b},n=function(a){return function(b){var d,e;switch(d=b[0],e=b[1],d){case"afterTag":return c.add([e,a]);case"beforeTag":return c.add([a,e])}}},i=0,k=a.length;k>i;i++)q=a[i],g=q.id,b=q.criteria,m(b,p,n(g));for(h=d.uniq(c.toArray().concat(function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)g=a[b].id,d.push(g);return d}())),e=function(a){return function(b){return b.id===a}},o=[],j=0,l=h.length;l>j;j++)g=h[j],r=d.find(a,e(g)),null!=r&&o.push(r);return o},b.meetsCriteria=h.meetsCriteria,b.runTemplate=h.runTemplate,b.deliver=h.deliver,b.isIdDelivered=h.isIdDelivered,b.claimOneTimers=h.claimOneTimers,b.init=function(){var a;k.storeKuid(),j.onOnce("user_data_response",function(){k.storeKuid()}),a=n(g.get("tags")),g.set("tags",a),i.init(a)},l.regexp(/^tag:reload:?(.*)$/,function(a,b){var c,d,f;if(c=a[1]||e.DEFAULT,c in e)try{e[c](b)}catch(f){d=f,b(d)}else b(new TypeError("Krux('tags') has no method: "+c))})}),a("test-visualtags",function(a,b,c){var d,e,f,g,h,i,j,k,l;f=a("data"),l=function(a){var b,c,f,k,l,m,n,o,p,q,r;for(l=d(".kxtargeted"),b=0,c=l.length;c>b;)q=l[b].getAttribute("data-id"),o=l[b].getAttribute("data-alias"),f=j(q),k=d("#"+f),r=1===k.length?k[0]:l[b].parentNode,p=Math.max(i("width",l[b]),h("width",r)),n=Math.max(i("height",l[b]),h("height",r)),m=p*n,a("visualtag-not-blank",m,"Tag area appears to be empty ("+o+")"),r.style&&e(r.style.width)&&a("visualtag-expected-width",g(e(r.style.width),p)<10,"Tag width ain't right ("+o+")"),r.style&&e(r.style.height)&&a("visualtag-expected-height",g(e(r.style.height),n)<10,"Tag height ain't right ("+o+")"),b++},e=function(a){return(""+a).indexOf("px")>-1?parseInt(a.replace("px",""),10)||0:0},g=function(a,b){return Math.floor(Math.abs(a-b)/b*100)},j=function(a){var b,c;c=f.get("tagsByName");for(b in c)if(c[b].id===a)return c[b].target||"";return""},i=function(a,b){var c;return c="offset"+("width"===a?"Width":"Height"),b[c]||0},h=function(a,b){var c,d,e;if(k++,k>1e3)return 0;for(e=0,d="offset"+("width"===a?"Width":"Height"),c=0;c<b.childNodes.length;)e=Math.max(e,b.childNodes[c][d]||0),b.childNodes[c].childNodes.length&&(e=Math.max(e,h(a,b.childNodes[c]))),c++;return e},d=a("sizzle").find,b.init=function(){a("test").module("visualtags",function(a){l(a)})},k=0});var c=[].slice;a("test",function(a,b,d){var e,f,g,h,i,j,k,l,m,n;e=a("underscore"),n=a("util"),h=a("events"),j={},i="test",b.status="NOT_STARTED",m=b.test=function(a,c,d){var e;return e=c?"pass":"fail",b.results.push({module:i,code:a,data:d,assertion:c,time:new Date,status:e}),h.fire("test:"+e,{code:a,data:d}),c},g=function(a,b){return e.isArray(a)&&e.isArray(b)?a.length===b.length&&e.all(a,function(a,c){return g(a,b[c])}):a===b},m.eq=function(a,b,c){return m(a,g(b,c),{actual:b,expected:c})},f=function(){"NOT_STARTED"!==b.status&&m("tests_not_started",!1,b.status)},b.module=function(a,b){f(),j[a]=b},l=function(a,b){var c,d;i=a;try{b(m)}catch(d){c=d,m("tests_module_threw",!1,"module_"+a+"_threw:"+c.message)}},k=b.run=function(){var a,f,g,i,k,n,o,p,q,r,s,t,u;b.results=[],b.failureGroup=null,m("tests_to_run",!e.isEmpty(j));for(p in j)d=j[p],l(p,d);if(s=b.report=e.groupBy(b.results,"status"),s.total=b.results.length,s.toString=function(){var a,d,e,f,g,h,i,j;try{for(a=[],j=function(){var b;b=1<=arguments.length?c.call(arguments,0):[],a.push(b.join(""))},j("Test Summary: "+b.status),j("Version: "+window.Krux.version+", "+window.Krux.commit),b.failureGroup&&j("Failure Group:"+b.failureGroup),j("Phase: "+b.phase),j("Status,Code,Data"),i=b.results,f=0,g=i.length;g>f;f++)h=i[f],j(h.status,",",h.code,",",h.data);return a.join("\n")}catch(e){return d=e,"report.toString failed: "+d}},u=b.status=s.status=s.fail?"FAIL":"PASS","PASS"!==u){for(o=-1,q=void 0,f=1e3,a=[],n={tests_to_run:f--,tests_module_threw:f--,pixel:f--,tag_delivered:f--},r=s.fail,g=0,i=r.length;i>g;g++)t=r[g],k=n[t.code]||0,a.push(t.code+": "+t.data),k>o&&(o=k,q=t);b.failureGroup=q.code+(q.data?":"+q.data:""),b.phase=h.happened("dom:load")?"after_load":h.happened("dom:ready")?"after_ready_before_load":"before_ready"}h.fire("test:all_done",{status:u})},b.init=function(){var a;a=n.once(k),h.on("pixel",a),h.on("dom:beforeunload",a),h.on("dom:unload",a)}}),a("timing",function(a,b,c){var d,e,f;e=a("data"),d=a("underscore"),f=function(a){return function(){return e.set(a,d.now())}},b.start=f("started"),b.end=f("ended"),b.SECONDS=1,b.MINUTES=60,b.HOURS=60*b.MINUTES,b.DAYS=24*b.HOURS,b.MONTHS=30*b.DAYS,b.YEARS=365*b.MONTHS,b.endOfDay=function(){var a;return a=new Date(d.now()+864e5),(new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date)/1e3}});var c=[].slice;a("util",function(a,b,d){var e,f,g;e=a("underscore"),f=a("json"),b.globalEval=function(a,b){b=b||window,a&&/\S/.test(a)&&!function(a){b.eval.call(b,a)}(a)},b.parseParams=b.parseKeyValues=function(a,b,c,d){var f,g;return null==b&&(b="&"),null==c&&(c="="),null==d&&(d=decodeURIComponent),f={},"string"!=typeof a?f:(g=new RegExp(b+"*([^"+c+b+"]+)"+c+"([^"+b+"]+)"+b+"*","g"),a.replace(g,function(a,b,c){c=function(){try{return d(c)}catch(a){return c}}(),f[b]=f[b]?e.isArray(f[b])?f[b].concat([c]):[f[b],c]:c}),f)},b.shuffle=function(a){var b,c,d;for(b=a.length;b>0;)c=Math.floor(Math.random()*b),b--,d=[a[c],a[b]],a[b]=d[0],a[c]=d[1];return a},b.urlParams=function(a){return null==a&&(a=window.location.href),b.parseParams(e.compact(a.match(/[^\#?]+(?:\?([^#]*))?(?:#(.*))?/).slice(1)).join("&"))},b.paramString=function(a,b,c,d){var f,g,h,i,j,k,l;null==b&&(b="&"),null==c&&(c="="),null==d&&(d=encodeURIComponent),i=[];for(g in a)for(l=a[g],j=e.isArray(l)?l:[l],f=0,h=j.length;h>f;f++)k=j[f],null!=k&&""!==k&&i.push(""+d(g)+c+d(k));return i.join(b)},b.isPrimitive=function(a){return null==a||!/^object|function$/.test(typeof a)&&!e.isNaN(a)},b.isSerializable=function(a){return b.isPrimitive(a)||!/[object [^\]]*]/.test(String(a))},b.remove=function(a,b){var c,d,e,f;if(a){for(e=[],c=0,d=a.length;d>c;c++)f=a[c],f!==b&&e.push(f);return e}},b.escapeRegexp=function(){var a,b;return b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],a=new RegExp("(\\"+b.join("|\\")+")","g"),function(b){return(""+b).replace(a,"\\$1")}}(),b.noop=function(){},b.defer=function(a){var b;b=e.rest(arguments),window.setTimeout(function(){a.apply(null,b)},0)},g=[],g.toString=function(){return f.stringify(g)},b.log=function(a){return e.isString(a)&&console?void 0:a?(a.time=new Date,void g.push(a)):g},b.Set=function(a){var b;for(b=0;b<a.length;)this[a[b]]=!0,b++},b.negate=function(a){return function(){return!a.apply(this,arguments)}},b.bind=function(a,b){var c,d;return a.isBound&&arguments.length<3?a:(d=e.rest(arguments,2),c=function(){return a.apply(b,d.concat(e.toArray(arguments)))},c.actual=a,c.isBound=!0,c)},b.rewriter=function(a){return function(b){return a[b]||b}},b.once=function(a){var c,d,e;return a.isOnce&&arguments.length<3?a:(c=!1,e=void 0,a=b.bind.apply(null,arguments),d=function(){return c?e:(c=!0,e=a.apply(null,arguments))},d.isOnce=!0,d.actual=a,d)},b.ms=function(){return new Date-a("data").get("started")},b.param=function(a){var b;return(b=window.location.href.match("\\bkx"+a+"(?:=|\\b)([^&\\#]*)"))&&(b[1]||!0)},b.values=function(a){var b,c,d;switch(!1){case!(null==a):return[];case!e.isArray(a):return a.slice(0);default:c=[];for(b in a)d=a[b],c.push(d);return c}},b.attributes=function(a){var b;return b=function(a,c){var d;return d=arguments.length,0===d?b.all():e.isString(a)?1===d?b.get(a):b.set(a,c):b.set(a)},b.get=a.get,b.all=a.all,b.set=function(b,c){var d,f,g;if(null!=c)return a.set(b,c);if(e.isObject(b)){f=[];for(d in b)g=b[d],f.push(a.set(d,g));return f}},a.values&&b.set(a.values),b},b.deref=function(a,b){var c,d,e,f;1===arguments.length&&(b=a,a=window);try{for(f=b.split("."),c=0,e=f.length;e>c;c++)d=f[c],a=a[d];return a}catch(g){}},b.yes=function(){return!0},b.matchAll=function(){var a,b,d,e,f;for(f=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],a=0,b=e.length;b>a;a++)if(d=e[a],!(null!=d.test?d.test(f):-1!==f.indexOf(d)))return!1;return!0},b.measureString=function(a){var b,c,d,e,f;for(null==a&&(a=""),b=0,d=e=0,f=a.length;f>=0?f>e:e>f;d=f>=0?++e:--e)c=a.charCodeAt(d),b+=function(){switch(!1){
case!(256>c):return 1;case!(65536>c):return 2;case!(16777216>c):return 3;default:return 4}}();return 2*b},b.rate=function(a){return Math.random()<=a}}),a("uuid",function(a,b,c){var d;return d=a("underscore"),c.exports=function(){return(""+d.now()+Math.random()).replace(/[^\d]*/g,"")}}),a("version",function(a,b,c){return c.exports={commit:"67b92ed",version:"5.69.0"}}),a("whistle",function(a,b,c){var d,e,f,g,h,i,j,k;g=a("underscore"),h=a("dom"),j=a("store"),i=a("events"),f=a("privacy").USER_ID_TTL,b.BAIT_CLASSES=d="pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",b.BAIT_STYLES=e="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",b.taken=k=function(a){var b;return!h.attr(document.body,"abp")&&null!=a.offsetParent&&a.offsetHeight&&a.offsetLeft&&a.offsetTop&&a.offsetWidth&&a.clientHeight&&a.clientWidth?(b="function"==typeof getComputedStyle?getComputedStyle(a,null):void 0,"none"===b.display||"hidden"===b.visibility):!0},b.init=function(a,b){return null==a&&(a=function(){}),null==b&&(b=250),h.ready(function(){var c;return c=h.create("img",{"class":d,style:e}),h.append(document.body,c),setTimeout(function(){var b;return b=k(c),i.fire("whistle",{value:b}),a(b),j.set("whistle",Number(b),f),h.remove(c)},b)})},b.status=function(){return Number(j.get("whistle"))}});var d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty,c=[].slice;a("whitelist",function(a,b,f){var g,h,i,j;i=a("underscore"),j=a("util"),g=a("hash-set").HashSet,h=function(a){function b(){var a;a=1<=arguments.length?c.call(arguments,0):[],this._none=d(this._none,this),this._all=d(this._all,this),this._hasMatch=d(this._hasMatch,this),this.toString=d(this.toString,this),this.allowNone=d(this.allowNone,this),this.allowAll=d(this.allowAll,this),this.allowOnly=d(this.allowOnly,this),this.put=d(this.put,this),this.has=d(this.has,this),this.get=d(this.get,this),b.__super__.constructor.apply(this,[String].concat(c.call(a)))}return e(b,a),b.ALL={toString:function(){return"ALL"}},b.NONE={toString:function(){return"NONE"}},b.prototype.get=function(a){switch(!1){case!this._all():return a;case!this._none():return null;default:return b.__super__.get.call(this,a)}},b.prototype.has=function(a){switch(!1){case!this._none():return!1;case!this._all():return!0;default:return b.__super__.has.call(this,a)||this._hasMatch(a)}},b.prototype.put=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],(this._all()||this._none())&&(this._items={}),b.__super__.put.apply(this,a)},b.prototype.allowOnly=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],this.empty(),this.put.apply(this,a)},b.prototype.allowAll=function(){return this.empty(),this._items=b.ALL,this},b.prototype.allowNone=function(){return this.empty(),this._items=b.NONE,this},b.prototype.toString=function(){return j.isSerializable(this._items)?String(this._items):b.__super__.toString.call(this)},b.prototype._hasMatch=function(a){var b,c,d;this._thunk(),d=this._items;for(b in d)if(c=d[b],null!=c.test&&i.isFunction(c.test)&&c.test(a))return!0;return!1},b.prototype._all=function(){return this._items===b.ALL},b.prototype._none=function(){return this._items===b.NONE},b}(g),b.Whitelist=h,b.ALL=h.ALL,b.NONE=h.NONE,b.init=function(a){var b;return b=new h,a&&a!==h.ALL?a===h.NONE?b.allowNone():b.put.apply(b,arguments):b.allowAll(),b}}),a("x-frame",function(a,b,c){var d,e,f,g,h,i,j,k;d=a("underscore"),f=a("dom"),i=a("json"),j=f.d2on,e="*",g=b.isFramed=function(){return window.top!==window},h=function(a){return/^\s*(?:\[|\{)/.test(a)&&/(?:}|])\s*$/.test(a)},k=b.send=function(a,b,c){if(d.isFunction(a.postMessage))try{a.postMessage(i.stringify(b,"{}"),c)}catch(e){}},b.broadcast=function(a,b){var c,f,h,i,j;for(null==b&&(b={}),b=d.defaults(b,{container:!0,domain:e,self:!1}),c=g()?window.parent:window,b.container&&(g()||b.self)&&k(c,a,b.domain),f=c.frames,h=i=0,j=f.length-1;j>=0?j>=i:i>=j;h=j>=0?++i:--i)(f[h]!==window||b.self)&&k(f[h],a,b.domain)},b.listen=function(a,b){var c;return c=d.defaults(b||{},{origin:e,strict:!0,win:window}),j(c.win,"message",function(b){var e;c.strict&&0!==String(b.origin||"").indexOf(c.origin)||a.call(this,{data:function(){var a;if(!d.isString(b.data)||!h(b.data))return b.data;try{return i.parse(b.data)}catch(a){return void(e=a)}}(),event:b})})},b.init=function(a){e=a}}),b("index")}();